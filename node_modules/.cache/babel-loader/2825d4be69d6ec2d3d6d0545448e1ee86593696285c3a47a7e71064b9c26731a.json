{"ast":null,"code":"import React,{useRef,useState,useEffect}from'react';import styled from'styled-components';import{useAudioContext}from'../context/AudioContext';import*as visualEffects from'../utils/newVisualEffects';// スタイルコンポーネント\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const VisualizerContainer=styled.div`\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 20px;\n`;const Title=styled.h1`\n  color: #ba68c8;\n  margin-bottom: 20px;\n  text-align: center;\n`;const ControlPanel=styled.div`\n  display: flex;\n  flex-direction: column;\n  background-color: #1e1e1e;\n  padding: 20px;\n  border-radius: 8px;\n  margin-bottom: 30px;\n`;const ControlRow=styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  gap: 20px;\n  margin-bottom: 20px;\n  \n  @media (max-width: 768px) {\n    flex-direction: column;\n  }\n`;const ControlGroup=styled.div`\n  flex: 1;\n  min-width: 200px;\n`;const Label=styled.label`\n  display: block;\n  margin-bottom: 8px;\n  color: #ddd;\n  font-weight: 500;\n`;const Button=styled.button`\n  background-color: ${props=>props.$primary?'#9c27b0':'#333'};\n  color: white;\n  border: none;\n  padding: 10px 15px;\n  border-radius: 4px;\n  cursor: pointer;\n  font-weight: 500;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    background-color: ${props=>props.$primary?'#ba68c8':'#444'};\n  }\n  \n  &:disabled {\n    background-color: #555;\n    cursor: not-allowed;\n  }\n`;const FileInput=styled.input`\n  display: none;\n`;const FileInputLabel=styled.label`\n  display: inline-block;\n  background-color: #333;\n  color: white;\n  padding: 10px 15px;\n  border-radius: 4px;\n  cursor: pointer;\n  font-weight: 500;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    background-color: #444;\n  }\n`;const Select=styled.select`\n  width: 100%;\n  padding: 10px;\n  background-color: #333;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  appearance: none;\n  cursor: pointer;\n  \n  &:focus {\n    outline: none;\n    box-shadow: 0 0 0 2px rgba(186, 104, 200, 0.3);\n  }\n`;const ColorInput=styled.input`\n  width: 40px;\n  height: 40px;\n  padding: 0;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  background-color: transparent;\n  \n  &::-webkit-color-swatch-wrapper {\n    padding: 0;\n  }\n  \n  &::-webkit-color-swatch {\n    border: none;\n    border-radius: 4px;\n  }\n`;const ColorInputGroup=styled.div`\n  display: flex;\n  align-items: center;\n  gap: 10px;\n`;const ProgressBar=styled.div`\n  width: 100%;\n  height: 6px;\n  background-color: #333;\n  border-radius: 3px;\n  margin-top: 5px;\n  position: relative;\n  cursor: pointer;\n`;const Progress=styled.div`\n  height: 100%;\n  width: ${props=>props.$width};\n  background-color: #ba68c8;\n  border-radius: 3px;\n`;const CanvasContainer=styled.div`\n  width: 100%;\n  height: 500px;\n  overflow: hidden;\n  border-radius: 8px;\n  background-color: #111;\n  position: relative;\n`;const Canvas=styled.canvas`\n  width: 100%;\n  height: 100%;\n  display: block;\n`;// 视觉化效果类型\nvar VisualizationType=/*#__PURE__*/function(VisualizationType){VisualizationType[\"SPHERE_3D\"]=\"sphere3d\";VisualizationType[\"SPECTRUM_WATERFALL\"]=\"spectrumWaterfall\";VisualizationType[\"STAR_FIELD\"]=\"starField\";return VisualizationType;}(VisualizationType||{});// サンプル音楽リスト\nconst SAMPLE_TRACKS=[{name:'サンプル音楽 1',url:'https://assets.codepen.io/4358584/Anitek_-_Komorebi.mp3'},{name:'サンプル音楽 2',url:'https://assets.codepen.io/4358584/Moonbase_-_Dinos.mp3'},{name:'サンプル音楽 3',url:'https://assets.codepen.io/4358584/n-Dimensions_-_Cyber_Diva.mp3'}];function VisualizerPage(){// 全局音频上下文\nconst{audioData,isPlaying,loadAudio,loadAudioFromUrl,play,pause,stop,setVolume,currentTime,duration,volume,seek,analyser,audioElement}=useAudioContext();// 状态管理\nconst[visualType,setVisualType]=useState(VisualizationType.SPHERE_3D);const[startColor,setStartColor]=useState('#9c27b0');const[endColor,setEndColor]=useState('#3f51b5');const[fileName,setFileName]=useState('未选择文件');// Refs\nconst canvasRef=useRef(null);const canvasCtxRef=useRef(null);const animationRef=useRef(null);// 各种可视化效果的状态\nconst sphereVisualizerRef=useRef(null);const spectrumWaterfallRef=useRef(null);const starfieldRef=useRef(null);// 初始化画布\nuseEffect(()=>{if(canvasRef.current){canvasCtxRef.current=canvasRef.current.getContext('2d');// 设置画布大小\nconst resizeCanvas=()=>{if(canvasRef.current){const container=canvasRef.current.parentElement;if(container){canvasRef.current.width=container.clientWidth;canvasRef.current.height=container.clientHeight;}}};resizeCanvas();window.addEventListener('resize',resizeCanvas);// 清理之前的可视化效果\nif(sphereVisualizerRef.current){sphereVisualizerRef.current.dispose();sphereVisualizerRef.current=null;}// 初始化新的可视化效果\nif(visualType===VisualizationType.SPHERE_3D&&canvasRef.current){sphereVisualizerRef.current=new visualEffects.SphereVisualizer(canvasRef.current);}else if(visualType===VisualizationType.SPECTRUM_WATERFALL&&canvasRef.current){spectrumWaterfallRef.current=new visualEffects.SpectrumWaterfall(canvasRef.current);}else if(visualType===VisualizationType.STAR_FIELD&&canvasRef.current){starfieldRef.current=new visualEffects.Starfield(canvasRef.current);}return()=>{window.removeEventListener('resize',resizeCanvas);// 清理可视化效果\nif(sphereVisualizerRef.current){sphereVisualizerRef.current.dispose();sphereVisualizerRef.current=null;}if(spectrumWaterfallRef.current){spectrumWaterfallRef.current.dispose();spectrumWaterfallRef.current=null;}if(starfieldRef.current){starfieldRef.current.dispose();starfieldRef.current=null;}};}},[visualType]);// 绘制可视化效果\nuseEffect(()=>{if(!audioData||!analyser||!canvasRef.current){return;}const canvas=canvasRef.current;const ctx=canvasCtxRef.current;const draw=()=>{if(!canvas||!ctx)return;const frequencies=new Uint8Array(analyser.frequencyBinCount);analyser.getByteFrequencyData(frequencies);try{switch(visualType){case VisualizationType.SPHERE_3D:if(sphereVisualizerRef.current){sphereVisualizerRef.current.draw(frequencies);}break;case VisualizationType.SPECTRUM_WATERFALL:if(spectrumWaterfallRef.current){spectrumWaterfallRef.current.draw(frequencies);}break;case VisualizationType.STAR_FIELD:if(starfieldRef.current){starfieldRef.current.draw(frequencies);}break;}}catch(error){console.error('Error drawing visualization:',error);// 清理可视化效果\nif(sphereVisualizerRef.current){sphereVisualizerRef.current.dispose();sphereVisualizerRef.current=null;}if(spectrumWaterfallRef.current){spectrumWaterfallRef.current.dispose();spectrumWaterfallRef.current=null;}if(starfieldRef.current){starfieldRef.current.dispose();starfieldRef.current=null;}}animationRef.current=requestAnimationFrame(draw);};draw();return()=>{if(animationRef.current){cancelAnimationFrame(animationRef.current);}// 清理可视化效果\nif(sphereVisualizerRef.current){sphereVisualizerRef.current.dispose();sphereVisualizerRef.current=null;}if(spectrumWaterfallRef.current){spectrumWaterfallRef.current.dispose();spectrumWaterfallRef.current=null;}if(starfieldRef.current){starfieldRef.current.dispose();starfieldRef.current=null;}};},[audioData,analyser,visualType]);// 文件名の更新を処理する\nconst handleFileChange=e=>{const files=e.target.files;if(files&&files.length>0){const file=files[0];setFileName(file.name);loadAudio(file);}};// サンプル音楽選択処理\nconst handleSampleTrack=url=>{loadAudioFromUrl(url);const track=SAMPLE_TRACKS.find(t=>t.url===url);if(track){setFileName(track.name);}};// 進行状況クリック処理\nconst handleProgressClick=e=>{if(!duration)return;const progressBar=e.currentTarget;const rect=progressBar.getBoundingClientRect();const offsetX=e.clientX-rect.left;const percentage=offsetX/rect.width;const newTime=percentage*duration;seek(newTime);};// 音量変更処理\nconst handleVolumeChange=e=>{const newVolume=parseFloat(e.target.value);setVolume(newVolume);};// 時間表示フォーマット\nconst formatTime=time=>{const minutes=Math.floor(time/60);const seconds=Math.floor(time%60);return`${minutes}:${seconds<10?'0':''}${seconds}`;};// 处理播放状态变化\nuseEffect(()=>{if(isPlaying){audioElement===null||audioElement===void 0?void 0:audioElement.play();}else{audioElement===null||audioElement===void 0?void 0:audioElement.pause();}},[isPlaying,audioElement]);// 处理音量变化\nuseEffect(()=>{if(audioElement){audioElement.volume=volume;}},[volume,audioElement]);return/*#__PURE__*/_jsxs(VisualizerContainer,{children:[/*#__PURE__*/_jsx(Title,{children:\"\\u97F3\\u697D\\u53EF\\u8996\\u5316\"}),/*#__PURE__*/_jsxs(ControlPanel,{children:[/*#__PURE__*/_jsxs(ControlRow,{children:[/*#__PURE__*/_jsxs(ControlGroup,{children:[/*#__PURE__*/_jsx(Label,{children:\"1. \\u97F3\\u697D\\u3092\\u9078\\u629E\"}),/*#__PURE__*/_jsxs(FileInputLabel,{children:[/*#__PURE__*/_jsx(FileInput,{type:\"file\",accept:\"audio/*\",onChange:handleFileChange}),\"\\u30D5\\u30A1\\u30A4\\u30EB\\u3092\\u9078\\u629E\"]}),/*#__PURE__*/_jsx(\"span\",{style:{marginLeft:'10px',color:'#999'},children:fileName})]}),/*#__PURE__*/_jsxs(ControlGroup,{children:[/*#__PURE__*/_jsx(Label,{children:\"\\u30B5\\u30F3\\u30D7\\u30EB\\u97F3\\u697D\"}),/*#__PURE__*/_jsxs(Select,{onChange:e=>handleSampleTrack(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u30B5\\u30F3\\u30D7\\u30EB\\u97F3\\u697D\\u3092\\u9078\\u629E\"}),SAMPLE_TRACKS.map((track,index)=>/*#__PURE__*/_jsx(\"option\",{value:track.url,children:track.name},index))]})]})]}),/*#__PURE__*/_jsxs(ControlRow,{children:[/*#__PURE__*/_jsxs(ControlGroup,{children:[/*#__PURE__*/_jsx(Label,{children:\"2. \\u518D\\u751F\\u30B3\\u30F3\\u30C8\\u30ED\\u30FC\\u30EB\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'10px'},children:[/*#__PURE__*/_jsx(Button,{$primary:true,onClick:play,disabled:!audioElement,children:\"\\u518D\\u751F\"}),/*#__PURE__*/_jsx(Button,{onClick:pause,disabled:!isPlaying,children:\"\\u4E00\\u6642\\u505C\\u6B62\"}),/*#__PURE__*/_jsx(Button,{onClick:stop,disabled:!audioElement,children:\"\\u505C\\u6B62\"})]})]}),/*#__PURE__*/_jsxs(ControlGroup,{children:[/*#__PURE__*/_jsxs(Label,{children:[\"\\u97F3\\u91CF\\uFF1A\",Math.round(volume*100),\"%\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"range\",min:\"0\",max:\"1\",step:\"0.01\",value:volume,onChange:e=>setVolume(parseFloat(e.target.value)),style:{width:'100%'}})]})]}),/*#__PURE__*/_jsx(ControlRow,{children:/*#__PURE__*/_jsxs(ControlGroup,{children:[/*#__PURE__*/_jsxs(Label,{children:[\"\\u9032\\u884C\\u72B6\\u6CC1\\uFF1A\",formatTime(currentTime),\" / \",formatTime(duration)]}),/*#__PURE__*/_jsx(ProgressBar,{onClick:handleProgressClick,children:/*#__PURE__*/_jsx(Progress,{$width:`${currentTime/duration*100||0}%`})})]})}),/*#__PURE__*/_jsxs(ControlRow,{children:[/*#__PURE__*/_jsxs(ControlGroup,{children:[/*#__PURE__*/_jsx(Label,{children:\"3. \\u8996\\u899A\\u5316\\u52B9\\u679C\\u3092\\u9078\\u629E\"}),/*#__PURE__*/_jsxs(Select,{value:visualType,onChange:e=>setVisualType(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:VisualizationType.SPHERE_3D,children:\"3D\\u7403\\u4F53\\u53CD\\u5FDC\"}),/*#__PURE__*/_jsx(\"option\",{value:VisualizationType.SPECTRUM_WATERFALL,children:\"\\u5468\\u6CE2\\u6570\\u7011\\u5E03\\u6D41\"}),/*#__PURE__*/_jsx(\"option\",{value:VisualizationType.STAR_FIELD,children:\"\\u661F\\u7CFB\\u52B9\\u679C\"})]})]}),/*#__PURE__*/_jsxs(ControlGroup,{children:[/*#__PURE__*/_jsx(Label,{children:\"\\u30AB\\u30B9\\u30BF\\u30E0\\u30AB\\u30E9\\u30FC\"}),/*#__PURE__*/_jsxs(ColorInputGroup,{children:[/*#__PURE__*/_jsx(ColorInput,{type:\"color\",value:startColor,onChange:e=>setStartColor(e.target.value)}),/*#__PURE__*/_jsx(\"span\",{style:{color:'#999'},children:\"\\u304B\\u3089\"}),/*#__PURE__*/_jsx(ColorInput,{type:\"color\",value:endColor,onChange:e=>setEndColor(e.target.value)})]})]})]})]}),/*#__PURE__*/_jsx(CanvasContainer,{children:/*#__PURE__*/_jsx(Canvas,{ref:canvasRef})})]});}export{VisualizerPage};","map":{"version":3,"names":["React","useRef","useState","useEffect","styled","useAudioContext","visualEffects","jsx","_jsx","jsxs","_jsxs","VisualizerContainer","div","Title","h1","ControlPanel","ControlRow","ControlGroup","Label","label","Button","button","props","$primary","FileInput","input","FileInputLabel","Select","select","ColorInput","ColorInputGroup","ProgressBar","Progress","$width","CanvasContainer","Canvas","canvas","VisualizationType","SAMPLE_TRACKS","name","url","VisualizerPage","audioData","isPlaying","loadAudio","loadAudioFromUrl","play","pause","stop","setVolume","currentTime","duration","volume","seek","analyser","audioElement","visualType","setVisualType","SPHERE_3D","startColor","setStartColor","endColor","setEndColor","fileName","setFileName","canvasRef","canvasCtxRef","animationRef","sphereVisualizerRef","spectrumWaterfallRef","starfieldRef","current","getContext","resizeCanvas","container","parentElement","width","clientWidth","height","clientHeight","window","addEventListener","dispose","SphereVisualizer","SPECTRUM_WATERFALL","SpectrumWaterfall","STAR_FIELD","Starfield","removeEventListener","ctx","draw","frequencies","Uint8Array","frequencyBinCount","getByteFrequencyData","error","console","requestAnimationFrame","cancelAnimationFrame","handleFileChange","e","files","target","length","file","handleSampleTrack","track","find","t","handleProgressClick","progressBar","currentTarget","rect","getBoundingClientRect","offsetX","clientX","left","percentage","newTime","handleVolumeChange","newVolume","parseFloat","value","formatTime","time","minutes","Math","floor","seconds","children","type","accept","onChange","style","marginLeft","color","map","index","display","gap","onClick","disabled","round","min","max","step","ref"],"sources":["C:/Users/20213/Desktop/web/src/pages/VisualizerPage.tsx"],"sourcesContent":["import React, { useRef, useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { useAudioContext } from '../context/AudioContext';\nimport * as visualEffects from '../utils/newVisualEffects';\n\n// スタイルコンポーネント\nconst VisualizerContainer = styled.div`\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 20px;\n`;\n\nconst Title = styled.h1`\n  color: #ba68c8;\n  margin-bottom: 20px;\n  text-align: center;\n`;\n\nconst ControlPanel = styled.div`\n  display: flex;\n  flex-direction: column;\n  background-color: #1e1e1e;\n  padding: 20px;\n  border-radius: 8px;\n  margin-bottom: 30px;\n`;\n\nconst ControlRow = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  gap: 20px;\n  margin-bottom: 20px;\n  \n  @media (max-width: 768px) {\n    flex-direction: column;\n  }\n`;\n\nconst ControlGroup = styled.div`\n  flex: 1;\n  min-width: 200px;\n`;\n\nconst Label = styled.label`\n  display: block;\n  margin-bottom: 8px;\n  color: #ddd;\n  font-weight: 500;\n`;\n\nconst Button = styled.button<{ $primary?: boolean }>`\n  background-color: ${props => props.$primary ? '#9c27b0' : '#333'};\n  color: white;\n  border: none;\n  padding: 10px 15px;\n  border-radius: 4px;\n  cursor: pointer;\n  font-weight: 500;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    background-color: ${props => props.$primary ? '#ba68c8' : '#444'};\n  }\n  \n  &:disabled {\n    background-color: #555;\n    cursor: not-allowed;\n  }\n`;\n\nconst FileInput = styled.input`\n  display: none;\n`;\n\nconst FileInputLabel = styled.label`\n  display: inline-block;\n  background-color: #333;\n  color: white;\n  padding: 10px 15px;\n  border-radius: 4px;\n  cursor: pointer;\n  font-weight: 500;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    background-color: #444;\n  }\n`;\n\nconst Select = styled.select`\n  width: 100%;\n  padding: 10px;\n  background-color: #333;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  appearance: none;\n  cursor: pointer;\n  \n  &:focus {\n    outline: none;\n    box-shadow: 0 0 0 2px rgba(186, 104, 200, 0.3);\n  }\n`;\n\nconst ColorInput = styled.input`\n  width: 40px;\n  height: 40px;\n  padding: 0;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  background-color: transparent;\n  \n  &::-webkit-color-swatch-wrapper {\n    padding: 0;\n  }\n  \n  &::-webkit-color-swatch {\n    border: none;\n    border-radius: 4px;\n  }\n`;\n\nconst ColorInputGroup = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 10px;\n`;\n\nconst ProgressBar = styled.div`\n  width: 100%;\n  height: 6px;\n  background-color: #333;\n  border-radius: 3px;\n  margin-top: 5px;\n  position: relative;\n  cursor: pointer;\n`;\n\nconst Progress = styled.div<{ $width: string }>`\n  height: 100%;\n  width: ${props => props.$width};\n  background-color: #ba68c8;\n  border-radius: 3px;\n`;\n\nconst CanvasContainer = styled.div`\n  width: 100%;\n  height: 500px;\n  overflow: hidden;\n  border-radius: 8px;\n  background-color: #111;\n  position: relative;\n`;\n\nconst Canvas = styled.canvas`\n  width: 100%;\n  height: 100%;\n  display: block;\n`;\n\n// 视觉化效果类型\nenum VisualizationType {\n  SPHERE_3D = 'sphere3d',\n  SPECTRUM_WATERFALL = 'spectrumWaterfall',\n  STAR_FIELD = 'starField'\n}\n\n// サンプル音楽リスト\nconst SAMPLE_TRACKS = [\n  { name: 'サンプル音楽 1', url: 'https://assets.codepen.io/4358584/Anitek_-_Komorebi.mp3' },\n  { name: 'サンプル音楽 2', url: 'https://assets.codepen.io/4358584/Moonbase_-_Dinos.mp3' },\n  { name: 'サンプル音楽 3', url: 'https://assets.codepen.io/4358584/n-Dimensions_-_Cyber_Diva.mp3' }\n];\n\nfunction VisualizerPage() {\n  // 全局音频上下文\n  const { \n    audioData, \n    isPlaying, \n    loadAudio, \n    loadAudioFromUrl, \n    play, \n    pause, \n    stop, \n    setVolume,\n    currentTime,\n    duration,\n    volume,\n    seek,\n    analyser,\n    audioElement\n  } = useAudioContext();\n  \n  // 状态管理\n  const [visualType, setVisualType] = useState<VisualizationType>(VisualizationType.SPHERE_3D);\n  const [startColor, setStartColor] = useState('#9c27b0');\n  const [endColor, setEndColor] = useState('#3f51b5');\n  const [fileName, setFileName] = useState('未选择文件');\n  \n  // Refs\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const canvasCtxRef = useRef<CanvasRenderingContext2D | null>(null);\n  const animationRef = useRef<number | null>(null);\n  \n  // 各种可视化效果的状态\n  const sphereVisualizerRef = useRef<visualEffects.SphereVisualizer | null>(null);\n  const spectrumWaterfallRef = useRef<visualEffects.SpectrumWaterfall | null>(null);\n  const starfieldRef = useRef<visualEffects.Starfield | null>(null);\n  \n  // 初始化画布\n  useEffect(() => {\n    if (canvasRef.current) {\n      canvasCtxRef.current = canvasRef.current.getContext('2d');\n      \n      // 设置画布大小\n      const resizeCanvas = () => {\n        if (canvasRef.current) {\n          const container = canvasRef.current.parentElement;\n          if (container) {\n            canvasRef.current.width = container.clientWidth;\n            canvasRef.current.height = container.clientHeight;\n          }\n        }\n      };\n      \n      resizeCanvas();\n      window.addEventListener('resize', resizeCanvas);\n      \n      // 清理之前的可视化效果\n      if (sphereVisualizerRef.current) {\n        sphereVisualizerRef.current.dispose();\n        sphereVisualizerRef.current = null;\n      }\n      \n      // 初始化新的可视化效果\n      if (visualType === VisualizationType.SPHERE_3D && canvasRef.current) {\n        sphereVisualizerRef.current = new visualEffects.SphereVisualizer(canvasRef.current);\n      } else if (visualType === VisualizationType.SPECTRUM_WATERFALL && canvasRef.current) {\n        spectrumWaterfallRef.current = new visualEffects.SpectrumWaterfall(canvasRef.current);\n      } else if (visualType === VisualizationType.STAR_FIELD && canvasRef.current) {\n        starfieldRef.current = new visualEffects.Starfield(canvasRef.current);\n      }\n      \n      return () => {\n        window.removeEventListener('resize', resizeCanvas);\n        \n        // 清理可视化效果\n        if (sphereVisualizerRef.current) {\n          sphereVisualizerRef.current.dispose();\n          sphereVisualizerRef.current = null;\n        }\n        if (spectrumWaterfallRef.current) {\n          spectrumWaterfallRef.current.dispose();\n          spectrumWaterfallRef.current = null;\n        }\n        if (starfieldRef.current) {\n          starfieldRef.current.dispose();\n          starfieldRef.current = null;\n        }\n      };\n    }\n  }, [visualType]);\n  \n  // 绘制可视化效果\n  useEffect(() => {\n    if (!audioData || !analyser || !canvasRef.current) {\n      return;\n    }\n\n    const canvas = canvasRef.current;\n    const ctx = canvasCtxRef.current;\n\n    const draw = () => {\n      if (!canvas || !ctx) return;\n\n      const frequencies = new Uint8Array(analyser.frequencyBinCount);\n      analyser.getByteFrequencyData(frequencies);\n\n      try {\n        switch (visualType) {\n          case VisualizationType.SPHERE_3D:\n            if (sphereVisualizerRef.current) {\n              sphereVisualizerRef.current.draw(frequencies);\n            }\n            break;\n\n          case VisualizationType.SPECTRUM_WATERFALL:\n            if (spectrumWaterfallRef.current) {\n              spectrumWaterfallRef.current.draw(frequencies);\n            }\n            break;\n\n          case VisualizationType.STAR_FIELD:\n            if (starfieldRef.current) {\n              starfieldRef.current.draw(frequencies);\n            }\n            break;\n        }\n      } catch (error) {\n        console.error('Error drawing visualization:', error);\n        // 清理可视化效果\n        if (sphereVisualizerRef.current) {\n          sphereVisualizerRef.current.dispose();\n          sphereVisualizerRef.current = null;\n        }\n        if (spectrumWaterfallRef.current) {\n          spectrumWaterfallRef.current.dispose();\n          spectrumWaterfallRef.current = null;\n        }\n        if (starfieldRef.current) {\n          starfieldRef.current.dispose();\n          starfieldRef.current = null;\n        }\n      }\n\n      animationRef.current = requestAnimationFrame(draw);\n    };\n\n    draw();\n\n    return () => {\n      if (animationRef.current) {\n        cancelAnimationFrame(animationRef.current);\n      }\n      // 清理可视化效果\n      if (sphereVisualizerRef.current) {\n        sphereVisualizerRef.current.dispose();\n        sphereVisualizerRef.current = null;\n      }\n      if (spectrumWaterfallRef.current) {\n        spectrumWaterfallRef.current.dispose();\n        spectrumWaterfallRef.current = null;\n      }\n      if (starfieldRef.current) {\n        starfieldRef.current.dispose();\n        starfieldRef.current = null;\n      }\n    };\n  }, [audioData, analyser, visualType]);\n  \n  // 文件名の更新を処理する\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = e.target.files;\n    if (files && files.length > 0) {\n      const file = files[0];\n      setFileName(file.name);\n      loadAudio(file);\n    }\n  };\n  \n  // サンプル音楽選択処理\n  const handleSampleTrack = (url: string) => {\n    loadAudioFromUrl(url);\n    const track = SAMPLE_TRACKS.find(t => t.url === url);\n    if (track) {\n      setFileName(track.name);\n    }\n  };\n  \n  // 進行状況クリック処理\n  const handleProgressClick = (e: React.MouseEvent<HTMLDivElement>) => {\n    if (!duration) return;\n    \n    const progressBar = e.currentTarget;\n    const rect = progressBar.getBoundingClientRect();\n    const offsetX = e.clientX - rect.left;\n    const percentage = offsetX / rect.width;\n    \n    const newTime = percentage * duration;\n    seek(newTime);\n  };\n  \n  // 音量変更処理\n  const handleVolumeChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const newVolume = parseFloat(e.target.value);\n    setVolume(newVolume);\n  };\n  \n  // 時間表示フォーマット\n  const formatTime = (time: number) => {\n    const minutes = Math.floor(time / 60);\n    const seconds = Math.floor(time % 60);\n    return `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;\n  };\n  \n  // 处理播放状态变化\n  useEffect(() => {\n    if (isPlaying) {\n      audioElement?.play();\n    } else {\n      audioElement?.pause();\n    }\n  }, [isPlaying, audioElement]);\n\n  // 处理音量变化\n  useEffect(() => {\n    if (audioElement) {\n      audioElement.volume = volume;\n    }\n  }, [volume, audioElement]);\n  \n  return (\n    <VisualizerContainer>\n      <Title>音楽可視化</Title>\n      \n      <ControlPanel>\n        <ControlRow>\n          <ControlGroup>\n            <Label>1. 音楽を選択</Label>\n            <FileInputLabel>\n              <FileInput \n                type=\"file\" \n                accept=\"audio/*\" \n                onChange={handleFileChange} \n              />\n              ファイルを選択\n            </FileInputLabel>\n            <span style={{ marginLeft: '10px', color: '#999' }}>{fileName}</span>\n          </ControlGroup>\n          \n          <ControlGroup>\n            <Label>サンプル音楽</Label>\n            <Select onChange={(e) => handleSampleTrack(e.target.value)}>\n              <option value=\"\">サンプル音楽を選択</option>\n              {SAMPLE_TRACKS.map((track, index) => (\n                <option key={index} value={track.url}>\n                  {track.name}\n                </option>\n              ))}\n            </Select>\n          </ControlGroup>\n        </ControlRow>\n        \n        <ControlRow>\n          <ControlGroup>\n            <Label>2. 再生コントロール</Label>\n            <div style={{ display: 'flex', gap: '10px' }}>\n              <Button $primary onClick={play} disabled={!audioElement}>\n                再生\n              </Button>\n              <Button onClick={pause} disabled={!isPlaying}>\n                一時停止\n              </Button>\n              <Button onClick={stop} disabled={!audioElement}>\n                停止\n              </Button>\n            </div>\n          </ControlGroup>\n          \n          <ControlGroup>\n            <Label>音量：{Math.round(volume * 100)}%</Label>\n            <input\n              type=\"range\"\n              min=\"0\"\n              max=\"1\"\n              step=\"0.01\"\n              value={volume}\n              onChange={(e) => setVolume(parseFloat(e.target.value))}\n              style={{ width: '100%' }}\n            />\n          </ControlGroup>\n        </ControlRow>\n        \n        <ControlRow>\n          <ControlGroup>\n            <Label>進行状況：{formatTime(currentTime)} / {formatTime(duration)}</Label>\n            <ProgressBar onClick={handleProgressClick}>\n              <Progress $width={`${(currentTime / duration) * 100 || 0}%`} />\n            </ProgressBar>\n          </ControlGroup>\n        </ControlRow>\n        \n        <ControlRow>\n          <ControlGroup>\n            <Label>3. 視覚化効果を選択</Label>\n            <Select \n              value={visualType} \n              onChange={(e) => setVisualType(e.target.value as VisualizationType)}\n            >\n              <option value={VisualizationType.SPHERE_3D}>3D球体反応</option>\n              <option value={VisualizationType.SPECTRUM_WATERFALL}>周波数瀑布流</option>\n              <option value={VisualizationType.STAR_FIELD}>星系効果</option>\n            </Select>\n          </ControlGroup>\n          \n          <ControlGroup>\n            <Label>カスタムカラー</Label>\n            <ColorInputGroup>\n              <ColorInput \n                type=\"color\" \n                value={startColor} \n                onChange={(e) => setStartColor(e.target.value)} \n              />\n              <span style={{ color: '#999' }}>から</span>\n              <ColorInput \n                type=\"color\" \n                value={endColor} \n                onChange={(e) => setEndColor(e.target.value)} \n              />\n            </ColorInputGroup>\n          </ControlGroup>\n        </ControlRow>\n      </ControlPanel>\n      \n      <CanvasContainer>\n        <Canvas ref={canvasRef} />\n      </CanvasContainer>\n    </VisualizerContainer>\n  );\n}\n\nexport { VisualizerPage };"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,MAAM,CAAEC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC1D,MAAO,CAAAC,MAAM,KAAM,mBAAmB,CACtC,OAASC,eAAe,KAAQ,yBAAyB,CACzD,MAAO,GAAK,CAAAC,aAAa,KAAM,2BAA2B,CAE1D;AAAA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBACA,KAAM,CAAAC,mBAAmB,CAAGP,MAAM,CAACQ,GAAG;AACtC;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAC,KAAK,CAAGT,MAAM,CAACU,EAAE;AACvB;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAC,YAAY,CAAGX,MAAM,CAACQ,GAAG;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAI,UAAU,CAAGZ,MAAM,CAACQ,GAAG;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAK,YAAY,CAAGb,MAAM,CAACQ,GAAG;AAC/B;AACA;AACA,CAAC,CAED,KAAM,CAAAM,KAAK,CAAGd,MAAM,CAACe,KAAK;AAC1B;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAC,MAAM,CAAGhB,MAAM,CAACiB,MAA8B;AACpD,sBAAsBC,KAAK,EAAIA,KAAK,CAACC,QAAQ,CAAG,SAAS,CAAG,MAAM;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwBD,KAAK,EAAIA,KAAK,CAACC,QAAQ,CAAG,SAAS,CAAG,MAAM;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAC,SAAS,CAAGpB,MAAM,CAACqB,KAAK;AAC9B;AACA,CAAC,CAED,KAAM,CAAAC,cAAc,CAAGtB,MAAM,CAACe,KAAK;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAQ,MAAM,CAAGvB,MAAM,CAACwB,MAAM;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAC,UAAU,CAAGzB,MAAM,CAACqB,KAAK;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAK,eAAe,CAAG1B,MAAM,CAACQ,GAAG;AAClC;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAmB,WAAW,CAAG3B,MAAM,CAACQ,GAAG;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAoB,QAAQ,CAAG5B,MAAM,CAACQ,GAAuB;AAC/C;AACA,WAAWU,KAAK,EAAIA,KAAK,CAACW,MAAM;AAChC;AACA;AACA,CAAC,CAED,KAAM,CAAAC,eAAe,CAAG9B,MAAM,CAACQ,GAAG;AAClC;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAuB,MAAM,CAAG/B,MAAM,CAACgC,MAAM;AAC5B;AACA;AACA;AACA,CAAC,CAED;AAAA,GACK,CAAAC,iBAAiB,uBAAjBA,iBAAiB,EAAjBA,iBAAiB,yBAAjBA,iBAAiB,2CAAjBA,iBAAiB,iCAAjB,CAAAA,iBAAiB,GAAjBA,iBAAiB,MAMtB;AACA,KAAM,CAAAC,aAAa,CAAG,CACpB,CAAEC,IAAI,CAAE,UAAU,CAAEC,GAAG,CAAE,yDAA0D,CAAC,CACpF,CAAED,IAAI,CAAE,UAAU,CAAEC,GAAG,CAAE,wDAAyD,CAAC,CACnF,CAAED,IAAI,CAAE,UAAU,CAAEC,GAAG,CAAE,iEAAkE,CAAC,CAC7F,CAED,QAAS,CAAAC,cAAcA,CAAA,CAAG,CACxB;AACA,KAAM,CACJC,SAAS,CACTC,SAAS,CACTC,SAAS,CACTC,gBAAgB,CAChBC,IAAI,CACJC,KAAK,CACLC,IAAI,CACJC,SAAS,CACTC,WAAW,CACXC,QAAQ,CACRC,MAAM,CACNC,IAAI,CACJC,QAAQ,CACRC,YACF,CAAC,CAAGlD,eAAe,CAAC,CAAC,CAErB;AACA,KAAM,CAACmD,UAAU,CAAEC,aAAa,CAAC,CAAGvD,QAAQ,CAAoBmC,iBAAiB,CAACqB,SAAS,CAAC,CAC5F,KAAM,CAACC,UAAU,CAAEC,aAAa,CAAC,CAAG1D,QAAQ,CAAC,SAAS,CAAC,CACvD,KAAM,CAAC2D,QAAQ,CAAEC,WAAW,CAAC,CAAG5D,QAAQ,CAAC,SAAS,CAAC,CACnD,KAAM,CAAC6D,QAAQ,CAAEC,WAAW,CAAC,CAAG9D,QAAQ,CAAC,OAAO,CAAC,CAEjD;AACA,KAAM,CAAA+D,SAAS,CAAGhE,MAAM,CAAoB,IAAI,CAAC,CACjD,KAAM,CAAAiE,YAAY,CAAGjE,MAAM,CAAkC,IAAI,CAAC,CAClE,KAAM,CAAAkE,YAAY,CAAGlE,MAAM,CAAgB,IAAI,CAAC,CAEhD;AACA,KAAM,CAAAmE,mBAAmB,CAAGnE,MAAM,CAAwC,IAAI,CAAC,CAC/E,KAAM,CAAAoE,oBAAoB,CAAGpE,MAAM,CAAyC,IAAI,CAAC,CACjF,KAAM,CAAAqE,YAAY,CAAGrE,MAAM,CAAiC,IAAI,CAAC,CAEjE;AACAE,SAAS,CAAC,IAAM,CACd,GAAI8D,SAAS,CAACM,OAAO,CAAE,CACrBL,YAAY,CAACK,OAAO,CAAGN,SAAS,CAACM,OAAO,CAACC,UAAU,CAAC,IAAI,CAAC,CAEzD;AACA,KAAM,CAAAC,YAAY,CAAGA,CAAA,GAAM,CACzB,GAAIR,SAAS,CAACM,OAAO,CAAE,CACrB,KAAM,CAAAG,SAAS,CAAGT,SAAS,CAACM,OAAO,CAACI,aAAa,CACjD,GAAID,SAAS,CAAE,CACbT,SAAS,CAACM,OAAO,CAACK,KAAK,CAAGF,SAAS,CAACG,WAAW,CAC/CZ,SAAS,CAACM,OAAO,CAACO,MAAM,CAAGJ,SAAS,CAACK,YAAY,CACnD,CACF,CACF,CAAC,CAEDN,YAAY,CAAC,CAAC,CACdO,MAAM,CAACC,gBAAgB,CAAC,QAAQ,CAAER,YAAY,CAAC,CAE/C;AACA,GAAIL,mBAAmB,CAACG,OAAO,CAAE,CAC/BH,mBAAmB,CAACG,OAAO,CAACW,OAAO,CAAC,CAAC,CACrCd,mBAAmB,CAACG,OAAO,CAAG,IAAI,CACpC,CAEA;AACA,GAAIf,UAAU,GAAKnB,iBAAiB,CAACqB,SAAS,EAAIO,SAAS,CAACM,OAAO,CAAE,CACnEH,mBAAmB,CAACG,OAAO,CAAG,GAAI,CAAAjE,aAAa,CAAC6E,gBAAgB,CAAClB,SAAS,CAACM,OAAO,CAAC,CACrF,CAAC,IAAM,IAAIf,UAAU,GAAKnB,iBAAiB,CAAC+C,kBAAkB,EAAInB,SAAS,CAACM,OAAO,CAAE,CACnFF,oBAAoB,CAACE,OAAO,CAAG,GAAI,CAAAjE,aAAa,CAAC+E,iBAAiB,CAACpB,SAAS,CAACM,OAAO,CAAC,CACvF,CAAC,IAAM,IAAIf,UAAU,GAAKnB,iBAAiB,CAACiD,UAAU,EAAIrB,SAAS,CAACM,OAAO,CAAE,CAC3ED,YAAY,CAACC,OAAO,CAAG,GAAI,CAAAjE,aAAa,CAACiF,SAAS,CAACtB,SAAS,CAACM,OAAO,CAAC,CACvE,CAEA,MAAO,IAAM,CACXS,MAAM,CAACQ,mBAAmB,CAAC,QAAQ,CAAEf,YAAY,CAAC,CAElD;AACA,GAAIL,mBAAmB,CAACG,OAAO,CAAE,CAC/BH,mBAAmB,CAACG,OAAO,CAACW,OAAO,CAAC,CAAC,CACrCd,mBAAmB,CAACG,OAAO,CAAG,IAAI,CACpC,CACA,GAAIF,oBAAoB,CAACE,OAAO,CAAE,CAChCF,oBAAoB,CAACE,OAAO,CAACW,OAAO,CAAC,CAAC,CACtCb,oBAAoB,CAACE,OAAO,CAAG,IAAI,CACrC,CACA,GAAID,YAAY,CAACC,OAAO,CAAE,CACxBD,YAAY,CAACC,OAAO,CAACW,OAAO,CAAC,CAAC,CAC9BZ,YAAY,CAACC,OAAO,CAAG,IAAI,CAC7B,CACF,CAAC,CACH,CACF,CAAC,CAAE,CAACf,UAAU,CAAC,CAAC,CAEhB;AACArD,SAAS,CAAC,IAAM,CACd,GAAI,CAACuC,SAAS,EAAI,CAACY,QAAQ,EAAI,CAACW,SAAS,CAACM,OAAO,CAAE,CACjD,OACF,CAEA,KAAM,CAAAnC,MAAM,CAAG6B,SAAS,CAACM,OAAO,CAChC,KAAM,CAAAkB,GAAG,CAAGvB,YAAY,CAACK,OAAO,CAEhC,KAAM,CAAAmB,IAAI,CAAGA,CAAA,GAAM,CACjB,GAAI,CAACtD,MAAM,EAAI,CAACqD,GAAG,CAAE,OAErB,KAAM,CAAAE,WAAW,CAAG,GAAI,CAAAC,UAAU,CAACtC,QAAQ,CAACuC,iBAAiB,CAAC,CAC9DvC,QAAQ,CAACwC,oBAAoB,CAACH,WAAW,CAAC,CAE1C,GAAI,CACF,OAAQnC,UAAU,EAChB,IAAK,CAAAnB,iBAAiB,CAACqB,SAAS,CAC9B,GAAIU,mBAAmB,CAACG,OAAO,CAAE,CAC/BH,mBAAmB,CAACG,OAAO,CAACmB,IAAI,CAACC,WAAW,CAAC,CAC/C,CACA,MAEF,IAAK,CAAAtD,iBAAiB,CAAC+C,kBAAkB,CACvC,GAAIf,oBAAoB,CAACE,OAAO,CAAE,CAChCF,oBAAoB,CAACE,OAAO,CAACmB,IAAI,CAACC,WAAW,CAAC,CAChD,CACA,MAEF,IAAK,CAAAtD,iBAAiB,CAACiD,UAAU,CAC/B,GAAIhB,YAAY,CAACC,OAAO,CAAE,CACxBD,YAAY,CAACC,OAAO,CAACmB,IAAI,CAACC,WAAW,CAAC,CACxC,CACA,MACJ,CACF,CAAE,MAAOI,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,8BAA8B,CAAEA,KAAK,CAAC,CACpD;AACA,GAAI3B,mBAAmB,CAACG,OAAO,CAAE,CAC/BH,mBAAmB,CAACG,OAAO,CAACW,OAAO,CAAC,CAAC,CACrCd,mBAAmB,CAACG,OAAO,CAAG,IAAI,CACpC,CACA,GAAIF,oBAAoB,CAACE,OAAO,CAAE,CAChCF,oBAAoB,CAACE,OAAO,CAACW,OAAO,CAAC,CAAC,CACtCb,oBAAoB,CAACE,OAAO,CAAG,IAAI,CACrC,CACA,GAAID,YAAY,CAACC,OAAO,CAAE,CACxBD,YAAY,CAACC,OAAO,CAACW,OAAO,CAAC,CAAC,CAC9BZ,YAAY,CAACC,OAAO,CAAG,IAAI,CAC7B,CACF,CAEAJ,YAAY,CAACI,OAAO,CAAG0B,qBAAqB,CAACP,IAAI,CAAC,CACpD,CAAC,CAEDA,IAAI,CAAC,CAAC,CAEN,MAAO,IAAM,CACX,GAAIvB,YAAY,CAACI,OAAO,CAAE,CACxB2B,oBAAoB,CAAC/B,YAAY,CAACI,OAAO,CAAC,CAC5C,CACA;AACA,GAAIH,mBAAmB,CAACG,OAAO,CAAE,CAC/BH,mBAAmB,CAACG,OAAO,CAACW,OAAO,CAAC,CAAC,CACrCd,mBAAmB,CAACG,OAAO,CAAG,IAAI,CACpC,CACA,GAAIF,oBAAoB,CAACE,OAAO,CAAE,CAChCF,oBAAoB,CAACE,OAAO,CAACW,OAAO,CAAC,CAAC,CACtCb,oBAAoB,CAACE,OAAO,CAAG,IAAI,CACrC,CACA,GAAID,YAAY,CAACC,OAAO,CAAE,CACxBD,YAAY,CAACC,OAAO,CAACW,OAAO,CAAC,CAAC,CAC9BZ,YAAY,CAACC,OAAO,CAAG,IAAI,CAC7B,CACF,CAAC,CACH,CAAC,CAAE,CAAC7B,SAAS,CAAEY,QAAQ,CAAEE,UAAU,CAAC,CAAC,CAErC;AACA,KAAM,CAAA2C,gBAAgB,CAAIC,CAAsC,EAAK,CACnE,KAAM,CAAAC,KAAK,CAAGD,CAAC,CAACE,MAAM,CAACD,KAAK,CAC5B,GAAIA,KAAK,EAAIA,KAAK,CAACE,MAAM,CAAG,CAAC,CAAE,CAC7B,KAAM,CAAAC,IAAI,CAAGH,KAAK,CAAC,CAAC,CAAC,CACrBrC,WAAW,CAACwC,IAAI,CAACjE,IAAI,CAAC,CACtBK,SAAS,CAAC4D,IAAI,CAAC,CACjB,CACF,CAAC,CAED;AACA,KAAM,CAAAC,iBAAiB,CAAIjE,GAAW,EAAK,CACzCK,gBAAgB,CAACL,GAAG,CAAC,CACrB,KAAM,CAAAkE,KAAK,CAAGpE,aAAa,CAACqE,IAAI,CAACC,CAAC,EAAIA,CAAC,CAACpE,GAAG,GAAKA,GAAG,CAAC,CACpD,GAAIkE,KAAK,CAAE,CACT1C,WAAW,CAAC0C,KAAK,CAACnE,IAAI,CAAC,CACzB,CACF,CAAC,CAED;AACA,KAAM,CAAAsE,mBAAmB,CAAIT,CAAmC,EAAK,CACnE,GAAI,CAACjD,QAAQ,CAAE,OAEf,KAAM,CAAA2D,WAAW,CAAGV,CAAC,CAACW,aAAa,CACnC,KAAM,CAAAC,IAAI,CAAGF,WAAW,CAACG,qBAAqB,CAAC,CAAC,CAChD,KAAM,CAAAC,OAAO,CAAGd,CAAC,CAACe,OAAO,CAAGH,IAAI,CAACI,IAAI,CACrC,KAAM,CAAAC,UAAU,CAAGH,OAAO,CAAGF,IAAI,CAACpC,KAAK,CAEvC,KAAM,CAAA0C,OAAO,CAAGD,UAAU,CAAGlE,QAAQ,CACrCE,IAAI,CAACiE,OAAO,CAAC,CACf,CAAC,CAED;AACA,KAAM,CAAAC,kBAAkB,CAAInB,CAAsC,EAAK,CACrE,KAAM,CAAAoB,SAAS,CAAGC,UAAU,CAACrB,CAAC,CAACE,MAAM,CAACoB,KAAK,CAAC,CAC5CzE,SAAS,CAACuE,SAAS,CAAC,CACtB,CAAC,CAED;AACA,KAAM,CAAAG,UAAU,CAAIC,IAAY,EAAK,CACnC,KAAM,CAAAC,OAAO,CAAGC,IAAI,CAACC,KAAK,CAACH,IAAI,CAAG,EAAE,CAAC,CACrC,KAAM,CAAAI,OAAO,CAAGF,IAAI,CAACC,KAAK,CAACH,IAAI,CAAG,EAAE,CAAC,CACrC,MAAO,GAAGC,OAAO,IAAIG,OAAO,CAAG,EAAE,CAAG,GAAG,CAAG,EAAE,GAAGA,OAAO,EAAE,CAC1D,CAAC,CAED;AACA7H,SAAS,CAAC,IAAM,CACd,GAAIwC,SAAS,CAAE,CACbY,YAAY,SAAZA,YAAY,iBAAZA,YAAY,CAAET,IAAI,CAAC,CAAC,CACtB,CAAC,IAAM,CACLS,YAAY,SAAZA,YAAY,iBAAZA,YAAY,CAAER,KAAK,CAAC,CAAC,CACvB,CACF,CAAC,CAAE,CAACJ,SAAS,CAAEY,YAAY,CAAC,CAAC,CAE7B;AACApD,SAAS,CAAC,IAAM,CACd,GAAIoD,YAAY,CAAE,CAChBA,YAAY,CAACH,MAAM,CAAGA,MAAM,CAC9B,CACF,CAAC,CAAE,CAACA,MAAM,CAAEG,YAAY,CAAC,CAAC,CAE1B,mBACE7C,KAAA,CAACC,mBAAmB,EAAAsH,QAAA,eAClBzH,IAAA,CAACK,KAAK,EAAAoH,QAAA,CAAC,gCAAK,CAAO,CAAC,cAEpBvH,KAAA,CAACK,YAAY,EAAAkH,QAAA,eACXvH,KAAA,CAACM,UAAU,EAAAiH,QAAA,eACTvH,KAAA,CAACO,YAAY,EAAAgH,QAAA,eACXzH,IAAA,CAACU,KAAK,EAAA+G,QAAA,CAAC,mCAAQ,CAAO,CAAC,cACvBvH,KAAA,CAACgB,cAAc,EAAAuG,QAAA,eACbzH,IAAA,CAACgB,SAAS,EACR0G,IAAI,CAAC,MAAM,CACXC,MAAM,CAAC,SAAS,CAChBC,QAAQ,CAAEjC,gBAAiB,CAC5B,CAAC,6CAEJ,EAAgB,CAAC,cACjB3F,IAAA,SAAM6H,KAAK,CAAE,CAAEC,UAAU,CAAE,MAAM,CAAEC,KAAK,CAAE,MAAO,CAAE,CAAAN,QAAA,CAAElE,QAAQ,CAAO,CAAC,EACzD,CAAC,cAEfrD,KAAA,CAACO,YAAY,EAAAgH,QAAA,eACXzH,IAAA,CAACU,KAAK,EAAA+G,QAAA,CAAC,sCAAM,CAAO,CAAC,cACrBvH,KAAA,CAACiB,MAAM,EAACyG,QAAQ,CAAGhC,CAAC,EAAKK,iBAAiB,CAACL,CAAC,CAACE,MAAM,CAACoB,KAAK,CAAE,CAAAO,QAAA,eACzDzH,IAAA,WAAQkH,KAAK,CAAC,EAAE,CAAAO,QAAA,CAAC,wDAAS,CAAQ,CAAC,CAClC3F,aAAa,CAACkG,GAAG,CAAC,CAAC9B,KAAK,CAAE+B,KAAK,gBAC9BjI,IAAA,WAAoBkH,KAAK,CAAEhB,KAAK,CAAClE,GAAI,CAAAyF,QAAA,CAClCvB,KAAK,CAACnE,IAAI,EADAkG,KAEL,CACT,CAAC,EACI,CAAC,EACG,CAAC,EACL,CAAC,cAEb/H,KAAA,CAACM,UAAU,EAAAiH,QAAA,eACTvH,KAAA,CAACO,YAAY,EAAAgH,QAAA,eACXzH,IAAA,CAACU,KAAK,EAAA+G,QAAA,CAAC,qDAAW,CAAO,CAAC,cAC1BvH,KAAA,QAAK2H,KAAK,CAAE,CAAEK,OAAO,CAAE,MAAM,CAAEC,GAAG,CAAE,MAAO,CAAE,CAAAV,QAAA,eAC3CzH,IAAA,CAACY,MAAM,EAACG,QAAQ,MAACqH,OAAO,CAAE9F,IAAK,CAAC+F,QAAQ,CAAE,CAACtF,YAAa,CAAA0E,QAAA,CAAC,cAEzD,CAAQ,CAAC,cACTzH,IAAA,CAACY,MAAM,EAACwH,OAAO,CAAE7F,KAAM,CAAC8F,QAAQ,CAAE,CAAClG,SAAU,CAAAsF,QAAA,CAAC,0BAE9C,CAAQ,CAAC,cACTzH,IAAA,CAACY,MAAM,EAACwH,OAAO,CAAE5F,IAAK,CAAC6F,QAAQ,CAAE,CAACtF,YAAa,CAAA0E,QAAA,CAAC,cAEhD,CAAQ,CAAC,EACN,CAAC,EACM,CAAC,cAEfvH,KAAA,CAACO,YAAY,EAAAgH,QAAA,eACXvH,KAAA,CAACQ,KAAK,EAAA+G,QAAA,EAAC,oBAAG,CAACH,IAAI,CAACgB,KAAK,CAAC1F,MAAM,CAAG,GAAG,CAAC,CAAC,GAAC,EAAO,CAAC,cAC7C5C,IAAA,UACE0H,IAAI,CAAC,OAAO,CACZa,GAAG,CAAC,GAAG,CACPC,GAAG,CAAC,GAAG,CACPC,IAAI,CAAC,MAAM,CACXvB,KAAK,CAAEtE,MAAO,CACdgF,QAAQ,CAAGhC,CAAC,EAAKnD,SAAS,CAACwE,UAAU,CAACrB,CAAC,CAACE,MAAM,CAACoB,KAAK,CAAC,CAAE,CACvDW,KAAK,CAAE,CAAEzD,KAAK,CAAE,MAAO,CAAE,CAC1B,CAAC,EACU,CAAC,EACL,CAAC,cAEbpE,IAAA,CAACQ,UAAU,EAAAiH,QAAA,cACTvH,KAAA,CAACO,YAAY,EAAAgH,QAAA,eACXvH,KAAA,CAACQ,KAAK,EAAA+G,QAAA,EAAC,gCAAK,CAACN,UAAU,CAACzE,WAAW,CAAC,CAAC,KAAG,CAACyE,UAAU,CAACxE,QAAQ,CAAC,EAAQ,CAAC,cACtE3C,IAAA,CAACuB,WAAW,EAAC6G,OAAO,CAAE/B,mBAAoB,CAAAoB,QAAA,cACxCzH,IAAA,CAACwB,QAAQ,EAACC,MAAM,CAAE,GAAIiB,WAAW,CAAGC,QAAQ,CAAI,GAAG,EAAI,CAAC,GAAI,CAAE,CAAC,CACpD,CAAC,EACF,CAAC,CACL,CAAC,cAEbzC,KAAA,CAACM,UAAU,EAAAiH,QAAA,eACTvH,KAAA,CAACO,YAAY,EAAAgH,QAAA,eACXzH,IAAA,CAACU,KAAK,EAAA+G,QAAA,CAAC,qDAAW,CAAO,CAAC,cAC1BvH,KAAA,CAACiB,MAAM,EACL+F,KAAK,CAAElE,UAAW,CAClB4E,QAAQ,CAAGhC,CAAC,EAAK3C,aAAa,CAAC2C,CAAC,CAACE,MAAM,CAACoB,KAA0B,CAAE,CAAAO,QAAA,eAEpEzH,IAAA,WAAQkH,KAAK,CAAErF,iBAAiB,CAACqB,SAAU,CAAAuE,QAAA,CAAC,4BAAM,CAAQ,CAAC,cAC3DzH,IAAA,WAAQkH,KAAK,CAAErF,iBAAiB,CAAC+C,kBAAmB,CAAA6C,QAAA,CAAC,sCAAM,CAAQ,CAAC,cACpEzH,IAAA,WAAQkH,KAAK,CAAErF,iBAAiB,CAACiD,UAAW,CAAA2C,QAAA,CAAC,0BAAI,CAAQ,CAAC,EACpD,CAAC,EACG,CAAC,cAEfvH,KAAA,CAACO,YAAY,EAAAgH,QAAA,eACXzH,IAAA,CAACU,KAAK,EAAA+G,QAAA,CAAC,4CAAO,CAAO,CAAC,cACtBvH,KAAA,CAACoB,eAAe,EAAAmG,QAAA,eACdzH,IAAA,CAACqB,UAAU,EACTqG,IAAI,CAAC,OAAO,CACZR,KAAK,CAAE/D,UAAW,CAClByE,QAAQ,CAAGhC,CAAC,EAAKxC,aAAa,CAACwC,CAAC,CAACE,MAAM,CAACoB,KAAK,CAAE,CAChD,CAAC,cACFlH,IAAA,SAAM6H,KAAK,CAAE,CAAEE,KAAK,CAAE,MAAO,CAAE,CAAAN,QAAA,CAAC,cAAE,CAAM,CAAC,cACzCzH,IAAA,CAACqB,UAAU,EACTqG,IAAI,CAAC,OAAO,CACZR,KAAK,CAAE7D,QAAS,CAChBuE,QAAQ,CAAGhC,CAAC,EAAKtC,WAAW,CAACsC,CAAC,CAACE,MAAM,CAACoB,KAAK,CAAE,CAC9C,CAAC,EACa,CAAC,EACN,CAAC,EACL,CAAC,EACD,CAAC,cAEflH,IAAA,CAAC0B,eAAe,EAAA+F,QAAA,cACdzH,IAAA,CAAC2B,MAAM,EAAC+G,GAAG,CAAEjF,SAAU,CAAE,CAAC,CACX,CAAC,EACC,CAAC,CAE1B,CAEA,OAASxB,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}