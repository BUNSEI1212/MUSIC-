{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\20213\\\\Desktop\\\\web\\\\src\\\\pages\\\\VisualizerPage.tsx\",\n  _s = $RefreshSig$();\nimport React, { useRef, useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { useAudioAnalyzer } from '../hooks/useAudioAnalyzer';\nimport * as visualEffects from '../utils/visualEffects';\n\n// スタイルコンポーネント\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst VisualizerContainer = styled.div`\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 20px;\n`;\n_c = VisualizerContainer;\nconst Title = styled.h1`\n  color: #ba68c8;\n  margin-bottom: 20px;\n  text-align: center;\n`;\n_c2 = Title;\nconst ControlPanel = styled.div`\n  display: flex;\n  flex-direction: column;\n  background-color: #1e1e1e;\n  padding: 20px;\n  border-radius: 8px;\n  margin-bottom: 30px;\n`;\n_c3 = ControlPanel;\nconst ControlRow = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  gap: 20px;\n  margin-bottom: 20px;\n  \n  @media (max-width: 768px) {\n    flex-direction: column;\n  }\n`;\n_c4 = ControlRow;\nconst ControlGroup = styled.div`\n  flex: 1;\n  min-width: 200px;\n`;\n_c5 = ControlGroup;\nconst Label = styled.label`\n  display: block;\n  margin-bottom: 8px;\n  color: #ddd;\n  font-weight: 500;\n`;\n_c6 = Label;\nconst Button = styled.button`\n  background-color: ${props => props.$primary ? '#9c27b0' : '#333'};\n  color: white;\n  border: none;\n  padding: 10px 15px;\n  border-radius: 4px;\n  cursor: pointer;\n  font-weight: 500;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    background-color: ${props => props.$primary ? '#ba68c8' : '#444'};\n  }\n  \n  &:disabled {\n    background-color: #555;\n    cursor: not-allowed;\n  }\n`;\n_c7 = Button;\nconst FileInput = styled.input`\n  display: none;\n`;\n_c8 = FileInput;\nconst FileInputLabel = styled.label`\n  display: inline-block;\n  background-color: #333;\n  color: white;\n  padding: 10px 15px;\n  border-radius: 4px;\n  cursor: pointer;\n  font-weight: 500;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    background-color: #444;\n  }\n`;\n_c9 = FileInputLabel;\nconst Select = styled.select`\n  width: 100%;\n  padding: 10px;\n  background-color: #333;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  appearance: none;\n  cursor: pointer;\n  \n  &:focus {\n    outline: none;\n    box-shadow: 0 0 0 2px rgba(186, 104, 200, 0.3);\n  }\n`;\n_c10 = Select;\nconst ColorInput = styled.input`\n  width: 40px;\n  height: 40px;\n  padding: 0;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  background-color: transparent;\n  \n  &::-webkit-color-swatch-wrapper {\n    padding: 0;\n  }\n  \n  &::-webkit-color-swatch {\n    border: none;\n    border-radius: 4px;\n  }\n`;\n_c11 = ColorInput;\nconst ColorInputGroup = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 10px;\n`;\n_c12 = ColorInputGroup;\nconst ProgressBar = styled.div`\n  width: 100%;\n  height: 6px;\n  background-color: #333;\n  border-radius: 3px;\n  margin-top: 5px;\n  position: relative;\n  cursor: pointer;\n`;\n_c13 = ProgressBar;\nconst Progress = styled.div`\n  height: 100%;\n  width: ${props => props.$width};\n  background-color: #ba68c8;\n  border-radius: 3px;\n`;\n_c14 = Progress;\nconst CanvasContainer = styled.div`\n  width: 100%;\n  height: 500px;\n  overflow: hidden;\n  border-radius: 8px;\n  background-color: #111;\n  position: relative;\n`;\n_c15 = CanvasContainer;\nconst Canvas = styled.canvas`\n  width: 100%;\n  height: 100%;\n  display: block;\n`;\n\n// 定义可视化效果类型\n_c16 = Canvas;\nvar VisualizationType = /*#__PURE__*/function (VisualizationType) {\n  VisualizationType[\"SPECTRUM_BARS\"] = \"spectrumBars\";\n  VisualizationType[\"WAVEFORM\"] = \"waveform\";\n  VisualizationType[\"CIRCULAR\"] = \"circular\";\n  VisualizationType[\"PARTICLES\"] = \"particles\";\n  VisualizationType[\"KALEIDOSCOPE\"] = \"kaleidoscope\";\n  VisualizationType[\"AUDIO_WATERFALL\"] = \"audioWaterfall\";\n  VisualizationType[\"ORGANIC_FORM\"] = \"organicForm\";\n  VisualizationType[\"TETRIS\"] = \"tetris\";\n  VisualizationType[\"LIP_SYNC\"] = \"lipSync\";\n  VisualizationType[\"MUSIC_METEOR\"] = \"musicMeteor\";\n  VisualizationType[\"SOUND_GARDEN\"] = \"soundGarden\";\n  VisualizationType[\"DNA_HELIX\"] = \"dnaHelix\";\n  VisualizationType[\"DIGITAL_RIPPLE\"] = \"digitalRipple\";\n  VisualizationType[\"PARTICLE_TEXT\"] = \"particleText\";\n  return VisualizationType;\n}(VisualizationType || {}); // サンプル音楽リスト\nconst SAMPLE_TRACKS = [{\n  name: 'サンプル音楽 1',\n  url: 'https://assets.codepen.io/4358584/Anitek_-_Komorebi.mp3'\n}, {\n  name: 'サンプル音楽 2',\n  url: 'https://assets.codepen.io/4358584/Moonbase_-_Dinos.mp3'\n}, {\n  name: 'サンプル音楽 3',\n  url: 'https://assets.codepen.io/4358584/n-Dimensions_-_Cyber_Diva.mp3'\n}];\nfunction VisualizerPage() {\n  _s();\n  // オーディオ分析フック\n  const {\n    audioData,\n    isPlaying,\n    audioRef,\n    loadAudio,\n    loadAudioFromUrl,\n    play,\n    pause,\n    stop,\n    setVolume\n  } = useAudioAnalyzer();\n\n  // 状態管理\n  const [visualType, setVisualType] = useState(VisualizationType.SPECTRUM_BARS);\n  const [startColor, setStartColor] = useState('#9c27b0');\n  const [endColor, setEndColor] = useState('#3f51b5');\n  const [currentTime, setCurrentTime] = useState(0);\n  const [duration, setDuration] = useState(0);\n  const [volume, setVolumeState] = useState(1);\n  const [fileName, setFileName] = useState('ファイルが選択されていません');\n\n  // Refs\n  const canvasRef = useRef(null);\n  const canvasCtxRef = useRef(null);\n  const animationRef = useRef(null);\n  const particlesRef = useRef([]);\n\n  // 初期化画布\n  useEffect(() => {\n    if (canvasRef.current) {\n      canvasCtxRef.current = canvasRef.current.getContext('2d');\n\n      // 設定画布サイズ\n      const resizeCanvas = () => {\n        if (canvasRef.current) {\n          const container = canvasRef.current.parentElement;\n          if (container) {\n            canvasRef.current.width = container.clientWidth;\n            canvasRef.current.height = container.clientHeight;\n          }\n        }\n      };\n      resizeCanvas();\n      window.addEventListener('resize', resizeCanvas);\n\n      // もし粒子効果なら初期化粒子\n      if (visualType === VisualizationType.PARTICLES && canvasRef.current) {\n        particlesRef.current = visualEffects.createParticles(100, canvasRef.current.width, canvasRef.current.height, {\n          startColor,\n          endColor\n        });\n      }\n      return () => {\n        window.removeEventListener('resize', resizeCanvas);\n      };\n    }\n  }, [visualType, startColor, endColor]);\n\n  // 音楽イベント監聽\n  useEffect(() => {\n    if (audioRef.current) {\n      const audio = audioRef.current;\n      const timeUpdateHandler = () => {\n        setCurrentTime(audio.currentTime);\n        setDuration(audio.duration);\n      };\n      audio.addEventListener('timeupdate', timeUpdateHandler);\n      audio.addEventListener('loadedmetadata', timeUpdateHandler);\n      return () => {\n        audio.removeEventListener('timeupdate', timeUpdateHandler);\n        audio.removeEventListener('loadedmetadata', timeUpdateHandler);\n      };\n    }\n  }, [audioRef]);\n\n  // 描画視覚化効果\n  useEffect(() => {\n    // 如果数据未准备好或没有播放，不执行动画\n    if (!audioData.ready || !canvasCtxRef.current || !canvasRef.current) {\n      return;\n    }\n    const canvas = canvasRef.current;\n    const ctx = canvasCtxRef.current;\n    const draw = () => {\n      if (!ctx || !canvas) return;\n      const {\n        frequencies,\n        waveform,\n        volume\n      } = audioData;\n      switch (visualType) {\n        case VisualizationType.SPECTRUM_BARS:\n          visualEffects.drawSpectrumBars(ctx, frequencies, canvas.width, canvas.height, {\n            startColor,\n            endColor\n          });\n          break;\n        case VisualizationType.WAVEFORM:\n          visualEffects.drawWaveform(ctx, waveform, canvas.width, canvas.height, {\n            color: startColor,\n            filled: true\n          });\n          break;\n        case VisualizationType.CIRCULAR:\n          visualEffects.drawCircularSpectrum(ctx, frequencies, canvas.width, canvas.height, {\n            startColor,\n            endColor,\n            rotation: Date.now() * 0.0005\n          });\n          break;\n        case VisualizationType.PARTICLES:\n          ctx.clearRect(0, 0, canvas.width, canvas.height);\n          // 更新粒子位置\n          particlesRef.current = visualEffects.updateParticles(particlesRef.current, canvas.width, canvas.height, volume);\n          // 绘制粒子\n          visualEffects.drawParticles(ctx, particlesRef.current, volume);\n          break;\n        case VisualizationType.KALEIDOSCOPE:\n          visualEffects.drawKaleidoscope(ctx, frequencies, canvas.width, canvas.height, {\n            startColor,\n            endColor,\n            segments: 8,\n            rotation: Date.now() * 0.0002\n          });\n          break;\n        case VisualizationType.AUDIO_WATERFALL:\n          visualEffects.drawAudioWaterfall(ctx, frequencies, canvas.width, canvas.height, {\n            startColor,\n            endColor,\n            speed: 2\n          });\n          break;\n        case VisualizationType.ORGANIC_FORM:\n          visualEffects.drawOrganicForm(ctx, frequencies, waveform, canvas.width, canvas.height, {\n            startColor,\n            endColor,\n            complexity: 0.7 + volume * 0.3\n          });\n          break;\n        case VisualizationType.TETRIS:\n          visualEffects.drawTetris(ctx, frequencies, canvas.width, canvas.height, {\n            startColor,\n            endColor,\n            speed: 1 + volume * 2\n          });\n          break;\n        case VisualizationType.LIP_SYNC:\n          visualEffects.drawLipSync(ctx, frequencies, waveform, canvas.width, canvas.height, {\n            faceColor: startColor,\n            lipColor: endColor\n          });\n          break;\n        case VisualizationType.MUSIC_METEOR:\n          visualEffects.drawMusicMeteorShower(ctx, frequencies, waveform, canvas.width, canvas.height, {\n            startColor,\n            endColor,\n            density: 1 + volume\n          });\n          break;\n        case VisualizationType.SOUND_GARDEN:\n          visualEffects.drawSoundGarden(ctx, frequencies, waveform, canvas.width, canvas.height, {\n            startColor,\n            endColor,\n            flowerDensity: 1 + volume * 0.5\n          });\n          break;\n        case VisualizationType.DNA_HELIX:\n          visualEffects.drawDNAHelix(ctx, frequencies, waveform, canvas.width, canvas.height, {\n            startColor,\n            endColor,\n            pairStartColor: '#4CAF50',\n            pairEndColor: '#8BC34A'\n          });\n          break;\n        case VisualizationType.DIGITAL_RIPPLE:\n          visualEffects.drawDigitalRipple(ctx, frequencies, waveform, canvas.width, canvas.height, {\n            startColor,\n            endColor,\n            density: 1 + volume\n          });\n          break;\n        case VisualizationType.PARTICLE_TEXT:\n          visualEffects.drawParticleText(ctx, frequencies, waveform, canvas.width, canvas.height, {\n            text: '音楽',\n            startColor,\n            endColor,\n            textSize: 80\n          });\n          break;\n      }\n      animationRef.current = requestAnimationFrame(draw);\n    };\n    draw();\n\n    // アニメーションフレームをクリア\n    return () => {\n      if (animationRef.current) {\n        cancelAnimationFrame(animationRef.current);\n      }\n    };\n  }, [audioData, visualType, startColor, endColor]);\n\n  // ファイル入力処理\n  const handleFileChange = e => {\n    const files = e.target.files;\n    if (files && files.length > 0) {\n      const file = files[0];\n\n      // 检查是否为NCM格式文件\n      if (file.name.toLowerCase().endsWith('.ncm')) {\n        alert('不支持NCM格式文件。请先将NCM转换为MP3或WAV格式后再上传。');\n        return;\n      }\n      setFileName(file.name);\n      loadAudio(file);\n    }\n  };\n\n  // サンプル音楽選択処理\n  const handleSampleTrack = url => {\n    loadAudioFromUrl(url);\n    const track = SAMPLE_TRACKS.find(t => t.url === url);\n    if (track) {\n      setFileName(track.name);\n    }\n  };\n\n  // 進行状況クリック処理\n  const handleProgressClick = e => {\n    if (!audioRef.current || !duration) return;\n    const progressBar = e.currentTarget;\n    const rect = progressBar.getBoundingClientRect();\n    const offsetX = e.clientX - rect.left;\n    const percentage = offsetX / rect.width;\n    const newTime = percentage * duration;\n    audioRef.current.currentTime = newTime;\n  };\n\n  // 音量変更処理\n  const handleVolumeChange = e => {\n    const newVolume = parseFloat(e.target.value);\n    setVolumeState(newVolume);\n    setVolume(newVolume);\n  };\n\n  // 時間表示フォーマット\n  const formatTime = time => {\n    const minutes = Math.floor(time / 60);\n    const seconds = Math.floor(time % 60);\n    return `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;\n  };\n  return /*#__PURE__*/_jsxDEV(VisualizerContainer, {\n    children: [/*#__PURE__*/_jsxDEV(Title, {\n      children: \"\\u97F3\\u697D\\u53EF\\u8996\\u5316\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 474,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ControlPanel, {\n      children: [/*#__PURE__*/_jsxDEV(ControlRow, {\n        children: [/*#__PURE__*/_jsxDEV(ControlGroup, {\n          children: [/*#__PURE__*/_jsxDEV(Label, {\n            children: \"1. \\u97F3\\u697D\\u3092\\u9078\\u629E\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 479,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(FileInputLabel, {\n            children: [/*#__PURE__*/_jsxDEV(FileInput, {\n              type: \"file\",\n              accept: \"audio/*\",\n              onChange: handleFileChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 481,\n              columnNumber: 15\n            }, this), \"\\u30D5\\u30A1\\u30A4\\u30EB\\u3092\\u9078\\u629E\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 480,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              marginLeft: '10px',\n              color: '#999'\n            },\n            children: fileName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 488,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 478,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ControlGroup, {\n          children: [/*#__PURE__*/_jsxDEV(Label, {\n            children: \"\\u30B5\\u30F3\\u30D7\\u30EB\\u97F3\\u697D\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 492,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Select, {\n            onChange: e => handleSampleTrack(e.target.value),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"\\u30B5\\u30F3\\u30D7\\u30EB\\u97F3\\u697D\\u3092\\u9078\\u629E\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 494,\n              columnNumber: 15\n            }, this), SAMPLE_TRACKS.map((track, index) => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: track.url,\n              children: track.name\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 496,\n              columnNumber: 17\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 493,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 491,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 477,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ControlRow, {\n        children: [/*#__PURE__*/_jsxDEV(ControlGroup, {\n          children: [/*#__PURE__*/_jsxDEV(Label, {\n            children: \"2. \\u518D\\u751F\\u30B3\\u30F3\\u30C8\\u30ED\\u30FC\\u30EB\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 506,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              gap: '10px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              $primary: true,\n              onClick: play,\n              disabled: !audioData.ready,\n              children: \"\\u518D\\u751F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 508,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              onClick: pause,\n              disabled: !isPlaying,\n              children: \"\\u4E00\\u6642\\u505C\\u6B62\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 511,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              onClick: stop,\n              disabled: !audioData.ready,\n              children: \"\\u505C\\u6B62\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 514,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 507,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 505,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ControlGroup, {\n          children: [/*#__PURE__*/_jsxDEV(Label, {\n            children: [\"\\u97F3\\u91CF\\uFF1A\", Math.round(volume * 100), \"%\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 521,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"range\",\n            min: \"0\",\n            max: \"1\",\n            step: \"0.01\",\n            value: volume,\n            onChange: handleVolumeChange,\n            style: {\n              width: '100%'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 522,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 520,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 504,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ControlRow, {\n        children: /*#__PURE__*/_jsxDEV(ControlGroup, {\n          children: [/*#__PURE__*/_jsxDEV(Label, {\n            children: [\"\\u9032\\u884C\\u72B6\\u6CC1\\uFF1A\", formatTime(currentTime), \" / \", formatTime(duration)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 536,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ProgressBar, {\n            onClick: handleProgressClick,\n            children: /*#__PURE__*/_jsxDEV(Progress, {\n              $width: `${currentTime / duration * 100 || 0}%`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 538,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 537,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 535,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 534,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ControlRow, {\n        children: [/*#__PURE__*/_jsxDEV(ControlGroup, {\n          children: [/*#__PURE__*/_jsxDEV(Label, {\n            children: \"3. \\u8996\\u899A\\u5316\\u52B9\\u679C\\u3092\\u9078\\u629E\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 545,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Select, {\n            value: visualType,\n            onChange: e => setVisualType(e.target.value),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: VisualizationType.SPECTRUM_BARS,\n              children: \"\\u30B9\\u30DA\\u30AF\\u30C8\\u30E9\\u30E0\\u30D0\\u30FC\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 550,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: VisualizationType.WAVEFORM,\n              children: \"\\u6CE2\\u5F62\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 551,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: VisualizationType.CIRCULAR,\n              children: \"\\u5186\\u5F62\\u30B9\\u30DA\\u30AF\\u30C8\\u30E9\\u30E0\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 552,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: VisualizationType.PARTICLES,\n              children: \"\\u30D1\\u30FC\\u30C6\\u30A3\\u30AF\\u30EB\\u30B7\\u30B9\\u30C6\\u30E0\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 553,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: VisualizationType.KALEIDOSCOPE,\n              children: \"\\u4E07\\u83EF\\u93E1\\u30A8\\u30D5\\u30A7\\u30AF\\u30C8\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 554,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: VisualizationType.AUDIO_WATERFALL,\n              children: \"\\u30AA\\u30FC\\u30C7\\u30A3\\u30AA\\u30A6\\u30A9\\u30FC\\u30BF\\u30FC\\u30D5\\u30A9\\u30FC\\u30EB\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 555,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: VisualizationType.ORGANIC_FORM,\n              children: \"\\u30AA\\u30FC\\u30AC\\u30CB\\u30C3\\u30AF\\u30D5\\u30A9\\u30FC\\u30E0\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 556,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: VisualizationType.TETRIS,\n              children: \"\\u30C6\\u30C8\\u30EA\\u30B9\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 557,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: VisualizationType.LIP_SYNC,\n              children: \"\\u30EA\\u30C3\\u30D7\\u30B7\\u30F3\\u30AF\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 558,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: VisualizationType.MUSIC_METEOR,\n              children: \"\\u6D41\\u661F\\u96E8\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 559,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: VisualizationType.SOUND_GARDEN,\n              children: \"\\u97F3\\u306E\\u5EAD\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 560,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: VisualizationType.DNA_HELIX,\n              children: \"DNA\\u3089\\u305B\\u3093\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 561,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: VisualizationType.DIGITAL_RIPPLE,\n              children: \"\\u30C7\\u30B8\\u30BF\\u30EB\\u6CE2\\u7D0B\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 562,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: VisualizationType.PARTICLE_TEXT,\n              children: \"\\u30D1\\u30FC\\u30C6\\u30A3\\u30AF\\u30EB\\u30C6\\u30AD\\u30B9\\u30C8\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 563,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 546,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 544,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ControlGroup, {\n          children: [/*#__PURE__*/_jsxDEV(Label, {\n            children: \"\\u30AB\\u30B9\\u30BF\\u30E0\\u30AB\\u30E9\\u30FC\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 568,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ColorInputGroup, {\n            children: [/*#__PURE__*/_jsxDEV(ColorInput, {\n              type: \"color\",\n              value: startColor,\n              onChange: e => setStartColor(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 570,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                color: '#999'\n              },\n              children: \"\\u304B\\u3089\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 575,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ColorInput, {\n              type: \"color\",\n              value: endColor,\n              onChange: e => setEndColor(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 576,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 569,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 567,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 543,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 476,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CanvasContainer, {\n      children: /*#__PURE__*/_jsxDEV(Canvas, {\n        ref: canvasRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 587,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 586,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 473,\n    columnNumber: 5\n  }, this);\n}\n_s(VisualizerPage, \"pGmU/0j2yjUH8iELdEU5EqgWvwA=\", false, function () {\n  return [useAudioAnalyzer];\n});\n_c17 = VisualizerPage;\nexport default VisualizerPage;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10, _c11, _c12, _c13, _c14, _c15, _c16, _c17;\n$RefreshReg$(_c, \"VisualizerContainer\");\n$RefreshReg$(_c2, \"Title\");\n$RefreshReg$(_c3, \"ControlPanel\");\n$RefreshReg$(_c4, \"ControlRow\");\n$RefreshReg$(_c5, \"ControlGroup\");\n$RefreshReg$(_c6, \"Label\");\n$RefreshReg$(_c7, \"Button\");\n$RefreshReg$(_c8, \"FileInput\");\n$RefreshReg$(_c9, \"FileInputLabel\");\n$RefreshReg$(_c10, \"Select\");\n$RefreshReg$(_c11, \"ColorInput\");\n$RefreshReg$(_c12, \"ColorInputGroup\");\n$RefreshReg$(_c13, \"ProgressBar\");\n$RefreshReg$(_c14, \"Progress\");\n$RefreshReg$(_c15, \"CanvasContainer\");\n$RefreshReg$(_c16, \"Canvas\");\n$RefreshReg$(_c17, \"VisualizerPage\");","map":{"version":3,"names":["React","useRef","useState","useEffect","styled","useAudioAnalyzer","visualEffects","jsxDEV","_jsxDEV","VisualizerContainer","div","_c","Title","h1","_c2","ControlPanel","_c3","ControlRow","_c4","ControlGroup","_c5","Label","label","_c6","Button","button","props","$primary","_c7","FileInput","input","_c8","FileInputLabel","_c9","Select","select","_c10","ColorInput","_c11","ColorInputGroup","_c12","ProgressBar","_c13","Progress","$width","_c14","CanvasContainer","_c15","Canvas","canvas","_c16","VisualizationType","SAMPLE_TRACKS","name","url","VisualizerPage","_s","audioData","isPlaying","audioRef","loadAudio","loadAudioFromUrl","play","pause","stop","setVolume","visualType","setVisualType","SPECTRUM_BARS","startColor","setStartColor","endColor","setEndColor","currentTime","setCurrentTime","duration","setDuration","volume","setVolumeState","fileName","setFileName","canvasRef","canvasCtxRef","animationRef","particlesRef","current","getContext","resizeCanvas","container","parentElement","width","clientWidth","height","clientHeight","window","addEventListener","PARTICLES","createParticles","removeEventListener","audio","timeUpdateHandler","ready","ctx","draw","frequencies","waveform","drawSpectrumBars","WAVEFORM","drawWaveform","color","filled","CIRCULAR","drawCircularSpectrum","rotation","Date","now","clearRect","updateParticles","drawParticles","KALEIDOSCOPE","drawKaleidoscope","segments","AUDIO_WATERFALL","drawAudioWaterfall","speed","ORGANIC_FORM","drawOrganicForm","complexity","TETRIS","drawTetris","LIP_SYNC","drawLipSync","faceColor","lipColor","MUSIC_METEOR","drawMusicMeteorShower","density","SOUND_GARDEN","drawSoundGarden","flowerDensity","DNA_HELIX","drawDNAHelix","pairStartColor","pairEndColor","DIGITAL_RIPPLE","drawDigitalRipple","PARTICLE_TEXT","drawParticleText","text","textSize","requestAnimationFrame","cancelAnimationFrame","handleFileChange","e","files","target","length","file","toLowerCase","endsWith","alert","handleSampleTrack","track","find","t","handleProgressClick","progressBar","currentTarget","rect","getBoundingClientRect","offsetX","clientX","left","percentage","newTime","handleVolumeChange","newVolume","parseFloat","value","formatTime","time","minutes","Math","floor","seconds","children","_jsxFileName","lineNumber","columnNumber","type","accept","onChange","style","marginLeft","map","index","display","gap","onClick","disabled","round","min","max","step","ref","_c17","$RefreshReg$"],"sources":["C:/Users/20213/Desktop/web/src/pages/VisualizerPage.tsx"],"sourcesContent":["import React, { useRef, useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { useAudioAnalyzer } from '../hooks/useAudioAnalyzer';\nimport * as visualEffects from '../utils/visualEffects';\n\n// スタイルコンポーネント\nconst VisualizerContainer = styled.div`\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 20px;\n`;\n\nconst Title = styled.h1`\n  color: #ba68c8;\n  margin-bottom: 20px;\n  text-align: center;\n`;\n\nconst ControlPanel = styled.div`\n  display: flex;\n  flex-direction: column;\n  background-color: #1e1e1e;\n  padding: 20px;\n  border-radius: 8px;\n  margin-bottom: 30px;\n`;\n\nconst ControlRow = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  gap: 20px;\n  margin-bottom: 20px;\n  \n  @media (max-width: 768px) {\n    flex-direction: column;\n  }\n`;\n\nconst ControlGroup = styled.div`\n  flex: 1;\n  min-width: 200px;\n`;\n\nconst Label = styled.label`\n  display: block;\n  margin-bottom: 8px;\n  color: #ddd;\n  font-weight: 500;\n`;\n\nconst Button = styled.button<{ $primary?: boolean }>`\n  background-color: ${props => props.$primary ? '#9c27b0' : '#333'};\n  color: white;\n  border: none;\n  padding: 10px 15px;\n  border-radius: 4px;\n  cursor: pointer;\n  font-weight: 500;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    background-color: ${props => props.$primary ? '#ba68c8' : '#444'};\n  }\n  \n  &:disabled {\n    background-color: #555;\n    cursor: not-allowed;\n  }\n`;\n\nconst FileInput = styled.input`\n  display: none;\n`;\n\nconst FileInputLabel = styled.label`\n  display: inline-block;\n  background-color: #333;\n  color: white;\n  padding: 10px 15px;\n  border-radius: 4px;\n  cursor: pointer;\n  font-weight: 500;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    background-color: #444;\n  }\n`;\n\nconst Select = styled.select`\n  width: 100%;\n  padding: 10px;\n  background-color: #333;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  appearance: none;\n  cursor: pointer;\n  \n  &:focus {\n    outline: none;\n    box-shadow: 0 0 0 2px rgba(186, 104, 200, 0.3);\n  }\n`;\n\nconst ColorInput = styled.input`\n  width: 40px;\n  height: 40px;\n  padding: 0;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  background-color: transparent;\n  \n  &::-webkit-color-swatch-wrapper {\n    padding: 0;\n  }\n  \n  &::-webkit-color-swatch {\n    border: none;\n    border-radius: 4px;\n  }\n`;\n\nconst ColorInputGroup = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 10px;\n`;\n\nconst ProgressBar = styled.div`\n  width: 100%;\n  height: 6px;\n  background-color: #333;\n  border-radius: 3px;\n  margin-top: 5px;\n  position: relative;\n  cursor: pointer;\n`;\n\nconst Progress = styled.div<{ $width: string }>`\n  height: 100%;\n  width: ${props => props.$width};\n  background-color: #ba68c8;\n  border-radius: 3px;\n`;\n\nconst CanvasContainer = styled.div`\n  width: 100%;\n  height: 500px;\n  overflow: hidden;\n  border-radius: 8px;\n  background-color: #111;\n  position: relative;\n`;\n\nconst Canvas = styled.canvas`\n  width: 100%;\n  height: 100%;\n  display: block;\n`;\n\n// 定义可视化效果类型\nenum VisualizationType {\n  SPECTRUM_BARS = 'spectrumBars',\n  WAVEFORM = 'waveform',\n  CIRCULAR = 'circular',\n  PARTICLES = 'particles',\n  KALEIDOSCOPE = 'kaleidoscope',\n  AUDIO_WATERFALL = 'audioWaterfall',\n  ORGANIC_FORM = 'organicForm',\n  TETRIS = 'tetris',\n  LIP_SYNC = 'lipSync',\n  MUSIC_METEOR = 'musicMeteor',\n  SOUND_GARDEN = 'soundGarden',\n  DNA_HELIX = 'dnaHelix',\n  DIGITAL_RIPPLE = 'digitalRipple',\n  PARTICLE_TEXT = 'particleText'\n}\n\n// サンプル音楽リスト\nconst SAMPLE_TRACKS = [\n  { name: 'サンプル音楽 1', url: 'https://assets.codepen.io/4358584/Anitek_-_Komorebi.mp3' },\n  { name: 'サンプル音楽 2', url: 'https://assets.codepen.io/4358584/Moonbase_-_Dinos.mp3' },\n  { name: 'サンプル音楽 3', url: 'https://assets.codepen.io/4358584/n-Dimensions_-_Cyber_Diva.mp3' }\n];\n\nfunction VisualizerPage() {\n  // オーディオ分析フック\n  const { \n    audioData, \n    isPlaying, \n    audioRef,\n    loadAudio, \n    loadAudioFromUrl, \n    play, \n    pause, \n    stop, \n    setVolume \n  } = useAudioAnalyzer();\n  \n  // 状態管理\n  const [visualType, setVisualType] = useState<VisualizationType>(VisualizationType.SPECTRUM_BARS);\n  const [startColor, setStartColor] = useState('#9c27b0');\n  const [endColor, setEndColor] = useState('#3f51b5');\n  const [currentTime, setCurrentTime] = useState(0);\n  const [duration, setDuration] = useState(0);\n  const [volume, setVolumeState] = useState(1);\n  const [fileName, setFileName] = useState('ファイルが選択されていません');\n  \n  // Refs\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const canvasCtxRef = useRef<CanvasRenderingContext2D | null>(null);\n  const animationRef = useRef<number | null>(null);\n  const particlesRef = useRef<visualEffects.Particle[]>([]);\n  \n  // 初期化画布\n  useEffect(() => {\n    if (canvasRef.current) {\n      canvasCtxRef.current = canvasRef.current.getContext('2d');\n      \n      // 設定画布サイズ\n      const resizeCanvas = () => {\n        if (canvasRef.current) {\n          const container = canvasRef.current.parentElement;\n          if (container) {\n            canvasRef.current.width = container.clientWidth;\n            canvasRef.current.height = container.clientHeight;\n          }\n        }\n      };\n      \n      resizeCanvas();\n      window.addEventListener('resize', resizeCanvas);\n      \n      // もし粒子効果なら初期化粒子\n      if (visualType === VisualizationType.PARTICLES && canvasRef.current) {\n        particlesRef.current = visualEffects.createParticles(\n          100, \n          canvasRef.current.width, \n          canvasRef.current.height,\n          { startColor, endColor }\n        );\n      }\n      \n      return () => {\n        window.removeEventListener('resize', resizeCanvas);\n      };\n    }\n  }, [visualType, startColor, endColor]);\n  \n  // 音楽イベント監聽\n  useEffect(() => {\n    if (audioRef.current) {\n      const audio = audioRef.current;\n      \n      const timeUpdateHandler = () => {\n        setCurrentTime(audio.currentTime);\n        setDuration(audio.duration);\n      };\n      \n      audio.addEventListener('timeupdate', timeUpdateHandler);\n      audio.addEventListener('loadedmetadata', timeUpdateHandler);\n      \n      return () => {\n        audio.removeEventListener('timeupdate', timeUpdateHandler);\n        audio.removeEventListener('loadedmetadata', timeUpdateHandler);\n      };\n    }\n  }, [audioRef]);\n  \n  // 描画視覚化効果\n  useEffect(() => {\n    // 如果数据未准备好或没有播放，不执行动画\n    if (!audioData.ready || !canvasCtxRef.current || !canvasRef.current) {\n      return;\n    }\n    \n    const canvas = canvasRef.current;\n    const ctx = canvasCtxRef.current;\n    \n    const draw = () => {\n      if (!ctx || !canvas) return;\n      \n      const { frequencies, waveform, volume } = audioData;\n      \n      switch (visualType) {\n        case VisualizationType.SPECTRUM_BARS:\n          visualEffects.drawSpectrumBars(ctx, frequencies, canvas.width, canvas.height, {\n            startColor,\n            endColor\n          });\n          break;\n        \n        case VisualizationType.WAVEFORM:\n          visualEffects.drawWaveform(ctx, waveform, canvas.width, canvas.height, {\n            color: startColor,\n            filled: true\n          });\n          break;\n          \n        case VisualizationType.CIRCULAR:\n          visualEffects.drawCircularSpectrum(ctx, frequencies, canvas.width, canvas.height, {\n            startColor,\n            endColor,\n            rotation: Date.now() * 0.0005\n          });\n          break;\n          \n        case VisualizationType.PARTICLES:\n          ctx.clearRect(0, 0, canvas.width, canvas.height);\n          // 更新粒子位置\n          particlesRef.current = visualEffects.updateParticles(\n            particlesRef.current, \n            canvas.width, \n            canvas.height, \n            volume\n          );\n          // 绘制粒子\n          visualEffects.drawParticles(ctx, particlesRef.current, volume);\n          break;\n          \n        case VisualizationType.KALEIDOSCOPE:\n          visualEffects.drawKaleidoscope(ctx, frequencies, canvas.width, canvas.height, {\n            startColor,\n            endColor,\n            segments: 8,\n            rotation: Date.now() * 0.0002\n          });\n          break;\n          \n        case VisualizationType.AUDIO_WATERFALL:\n          visualEffects.drawAudioWaterfall(ctx, frequencies, canvas.width, canvas.height, {\n            startColor,\n            endColor,\n            speed: 2\n          });\n          break;\n          \n        case VisualizationType.ORGANIC_FORM:\n          visualEffects.drawOrganicForm(ctx, frequencies, waveform, canvas.width, canvas.height, {\n            startColor,\n            endColor,\n            complexity: 0.7 + volume * 0.3\n          });\n          break;\n          \n        case VisualizationType.TETRIS:\n          visualEffects.drawTetris(ctx, frequencies, canvas.width, canvas.height, {\n            startColor,\n            endColor,\n            speed: 1 + volume * 2\n          });\n          break;\n          \n        case VisualizationType.LIP_SYNC:\n          visualEffects.drawLipSync(ctx, frequencies, waveform, canvas.width, canvas.height, {\n            faceColor: startColor,\n            lipColor: endColor\n          });\n          break;\n          \n        case VisualizationType.MUSIC_METEOR:\n          visualEffects.drawMusicMeteorShower(ctx, frequencies, waveform, canvas.width, canvas.height, {\n            startColor,\n            endColor,\n            density: 1 + volume\n          });\n          break;\n          \n        case VisualizationType.SOUND_GARDEN:\n          visualEffects.drawSoundGarden(ctx, frequencies, waveform, canvas.width, canvas.height, {\n            startColor,\n            endColor,\n            flowerDensity: 1 + volume * 0.5\n          });\n          break;\n          \n        case VisualizationType.DNA_HELIX:\n          visualEffects.drawDNAHelix(ctx, frequencies, waveform, canvas.width, canvas.height, {\n            startColor,\n            endColor,\n            pairStartColor: '#4CAF50',\n            pairEndColor: '#8BC34A'\n          });\n          break;\n          \n        case VisualizationType.DIGITAL_RIPPLE:\n          visualEffects.drawDigitalRipple(ctx, frequencies, waveform, canvas.width, canvas.height, {\n            startColor,\n            endColor,\n            density: 1 + volume\n          });\n          break;\n          \n        case VisualizationType.PARTICLE_TEXT:\n          visualEffects.drawParticleText(ctx, frequencies, waveform, canvas.width, canvas.height, {\n            text: '音楽',\n            startColor,\n            endColor,\n            textSize: 80\n          });\n          break;\n      }\n      \n      animationRef.current = requestAnimationFrame(draw);\n    };\n    \n    draw();\n    \n    // アニメーションフレームをクリア\n    return () => {\n      if (animationRef.current) {\n        cancelAnimationFrame(animationRef.current);\n      }\n    };\n  }, [audioData, visualType, startColor, endColor]);\n  \n  // ファイル入力処理\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = e.target.files;\n    if (files && files.length > 0) {\n      const file = files[0];\n      \n      // 检查是否为NCM格式文件\n      if (file.name.toLowerCase().endsWith('.ncm')) {\n        alert('不支持NCM格式文件。请先将NCM转换为MP3或WAV格式后再上传。');\n        return;\n      }\n      \n      setFileName(file.name);\n      loadAudio(file);\n    }\n  };\n  \n  // サンプル音楽選択処理\n  const handleSampleTrack = (url: string) => {\n    loadAudioFromUrl(url);\n    const track = SAMPLE_TRACKS.find(t => t.url === url);\n    if (track) {\n      setFileName(track.name);\n    }\n  };\n  \n  // 進行状況クリック処理\n  const handleProgressClick = (e: React.MouseEvent<HTMLDivElement>) => {\n    if (!audioRef.current || !duration) return;\n    \n    const progressBar = e.currentTarget;\n    const rect = progressBar.getBoundingClientRect();\n    const offsetX = e.clientX - rect.left;\n    const percentage = offsetX / rect.width;\n    \n    const newTime = percentage * duration;\n    audioRef.current.currentTime = newTime;\n  };\n  \n  // 音量変更処理\n  const handleVolumeChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const newVolume = parseFloat(e.target.value);\n    setVolumeState(newVolume);\n    setVolume(newVolume);\n  };\n  \n  // 時間表示フォーマット\n  const formatTime = (time: number) => {\n    const minutes = Math.floor(time / 60);\n    const seconds = Math.floor(time % 60);\n    return `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;\n  };\n  \n  return (\n    <VisualizerContainer>\n      <Title>音楽可視化</Title>\n      \n      <ControlPanel>\n        <ControlRow>\n          <ControlGroup>\n            <Label>1. 音楽を選択</Label>\n            <FileInputLabel>\n              <FileInput \n                type=\"file\" \n                accept=\"audio/*\" \n                onChange={handleFileChange} \n              />\n              ファイルを選択\n            </FileInputLabel>\n            <span style={{ marginLeft: '10px', color: '#999' }}>{fileName}</span>\n          </ControlGroup>\n          \n          <ControlGroup>\n            <Label>サンプル音楽</Label>\n            <Select onChange={(e) => handleSampleTrack(e.target.value)}>\n              <option value=\"\">サンプル音楽を選択</option>\n              {SAMPLE_TRACKS.map((track, index) => (\n                <option key={index} value={track.url}>\n                  {track.name}\n                </option>\n              ))}\n            </Select>\n          </ControlGroup>\n        </ControlRow>\n        \n        <ControlRow>\n          <ControlGroup>\n            <Label>2. 再生コントロール</Label>\n            <div style={{ display: 'flex', gap: '10px' }}>\n              <Button $primary onClick={play} disabled={!audioData.ready}>\n                再生\n              </Button>\n              <Button onClick={pause} disabled={!isPlaying}>\n                一時停止\n              </Button>\n              <Button onClick={stop} disabled={!audioData.ready}>\n                停止\n              </Button>\n            </div>\n          </ControlGroup>\n          \n          <ControlGroup>\n            <Label>音量：{Math.round(volume * 100)}%</Label>\n            <input\n              type=\"range\"\n              min=\"0\"\n              max=\"1\"\n              step=\"0.01\"\n              value={volume}\n              onChange={handleVolumeChange}\n              style={{ width: '100%' }}\n            />\n          </ControlGroup>\n        </ControlRow>\n        \n        <ControlRow>\n          <ControlGroup>\n            <Label>進行状況：{formatTime(currentTime)} / {formatTime(duration)}</Label>\n            <ProgressBar onClick={handleProgressClick}>\n              <Progress $width={`${(currentTime / duration) * 100 || 0}%`} />\n            </ProgressBar>\n          </ControlGroup>\n        </ControlRow>\n        \n        <ControlRow>\n          <ControlGroup>\n            <Label>3. 視覚化効果を選択</Label>\n            <Select \n              value={visualType} \n              onChange={(e) => setVisualType(e.target.value as VisualizationType)}\n            >\n              <option value={VisualizationType.SPECTRUM_BARS}>スペクトラムバー</option>\n              <option value={VisualizationType.WAVEFORM}>波形</option>\n              <option value={VisualizationType.CIRCULAR}>円形スペクトラム</option>\n              <option value={VisualizationType.PARTICLES}>パーティクルシステム</option>\n              <option value={VisualizationType.KALEIDOSCOPE}>万華鏡エフェクト</option>\n              <option value={VisualizationType.AUDIO_WATERFALL}>オーディオウォーターフォール</option>\n              <option value={VisualizationType.ORGANIC_FORM}>オーガニックフォーム</option>\n              <option value={VisualizationType.TETRIS}>テトリス</option>\n              <option value={VisualizationType.LIP_SYNC}>リップシンク</option>\n              <option value={VisualizationType.MUSIC_METEOR}>流星雨</option>\n              <option value={VisualizationType.SOUND_GARDEN}>音の庭</option>\n              <option value={VisualizationType.DNA_HELIX}>DNAらせん</option>\n              <option value={VisualizationType.DIGITAL_RIPPLE}>デジタル波紋</option>\n              <option value={VisualizationType.PARTICLE_TEXT}>パーティクルテキスト</option>\n            </Select>\n          </ControlGroup>\n          \n          <ControlGroup>\n            <Label>カスタムカラー</Label>\n            <ColorInputGroup>\n              <ColorInput \n                type=\"color\" \n                value={startColor} \n                onChange={(e) => setStartColor(e.target.value)} \n              />\n              <span style={{ color: '#999' }}>から</span>\n              <ColorInput \n                type=\"color\" \n                value={endColor} \n                onChange={(e) => setEndColor(e.target.value)} \n              />\n            </ColorInputGroup>\n          </ControlGroup>\n        </ControlRow>\n      </ControlPanel>\n      \n      <CanvasContainer>\n        <Canvas ref={canvasRef} />\n      </CanvasContainer>\n    </VisualizerContainer>\n  );\n}\n\nexport default VisualizerPage;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,MAAM,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC1D,OAAOC,MAAM,MAAM,mBAAmB;AACtC,SAASC,gBAAgB,QAAQ,2BAA2B;AAC5D,OAAO,KAAKC,aAAa,MAAM,wBAAwB;;AAEvD;AAAA,SAAAC,MAAA,IAAAC,OAAA;AACA,MAAMC,mBAAmB,GAAGL,MAAM,CAACM,GAAG;AACtC;AACA;AACA;AACA,CAAC;AAACC,EAAA,GAJIF,mBAAmB;AAMzB,MAAMG,KAAK,GAAGR,MAAM,CAACS,EAAE;AACvB;AACA;AACA;AACA,CAAC;AAACC,GAAA,GAJIF,KAAK;AAMX,MAAMG,YAAY,GAAGX,MAAM,CAACM,GAAG;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACM,GAAA,GAPID,YAAY;AASlB,MAAME,UAAU,GAAGb,MAAM,CAACM,GAAG;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACQ,GAAA,GATID,UAAU;AAWhB,MAAME,YAAY,GAAGf,MAAM,CAACM,GAAG;AAC/B;AACA;AACA,CAAC;AAACU,GAAA,GAHID,YAAY;AAKlB,MAAME,KAAK,GAAGjB,MAAM,CAACkB,KAAK;AAC1B;AACA;AACA;AACA;AACA,CAAC;AAACC,GAAA,GALIF,KAAK;AAOX,MAAMG,MAAM,GAAGpB,MAAM,CAACqB,MAA8B;AACpD,sBAAsBC,KAAK,IAAIA,KAAK,CAACC,QAAQ,GAAG,SAAS,GAAG,MAAM;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwBD,KAAK,IAAIA,KAAK,CAACC,QAAQ,GAAG,SAAS,GAAG,MAAM;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,GAAA,GAlBIJ,MAAM;AAoBZ,MAAMK,SAAS,GAAGzB,MAAM,CAAC0B,KAAK;AAC9B;AACA,CAAC;AAACC,GAAA,GAFIF,SAAS;AAIf,MAAMG,cAAc,GAAG5B,MAAM,CAACkB,KAAK;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACW,GAAA,GAbID,cAAc;AAepB,MAAME,MAAM,GAAG9B,MAAM,CAAC+B,MAAM;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,IAAA,GAdIF,MAAM;AAgBZ,MAAMG,UAAU,GAAGjC,MAAM,CAAC0B,KAAK;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACQ,IAAA,GAjBID,UAAU;AAmBhB,MAAME,eAAe,GAAGnC,MAAM,CAACM,GAAG;AAClC;AACA;AACA;AACA,CAAC;AAAC8B,IAAA,GAJID,eAAe;AAMrB,MAAME,WAAW,GAAGrC,MAAM,CAACM,GAAG;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACgC,IAAA,GARID,WAAW;AAUjB,MAAME,QAAQ,GAAGvC,MAAM,CAACM,GAAuB;AAC/C;AACA,WAAWgB,KAAK,IAAIA,KAAK,CAACkB,MAAM;AAChC;AACA;AACA,CAAC;AAACC,IAAA,GALIF,QAAQ;AAOd,MAAMG,eAAe,GAAG1C,MAAM,CAACM,GAAG;AAClC;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACqC,IAAA,GAPID,eAAe;AASrB,MAAME,MAAM,GAAG5C,MAAM,CAAC6C,MAAM;AAC5B;AACA;AACA;AACA,CAAC;;AAED;AAAAC,IAAA,GANMF,MAAM;AAAA,IAOPG,iBAAiB,0BAAjBA,iBAAiB;EAAjBA,iBAAiB;EAAjBA,iBAAiB;EAAjBA,iBAAiB;EAAjBA,iBAAiB;EAAjBA,iBAAiB;EAAjBA,iBAAiB;EAAjBA,iBAAiB;EAAjBA,iBAAiB;EAAjBA,iBAAiB;EAAjBA,iBAAiB;EAAjBA,iBAAiB;EAAjBA,iBAAiB;EAAjBA,iBAAiB;EAAjBA,iBAAiB;EAAA,OAAjBA,iBAAiB;AAAA,EAAjBA,iBAAiB,SAiBtB;AACA,MAAMC,aAAa,GAAG,CACpB;EAAEC,IAAI,EAAE,UAAU;EAAEC,GAAG,EAAE;AAA0D,CAAC,EACpF;EAAED,IAAI,EAAE,UAAU;EAAEC,GAAG,EAAE;AAAyD,CAAC,EACnF;EAAED,IAAI,EAAE,UAAU;EAAEC,GAAG,EAAE;AAAkE,CAAC,CAC7F;AAED,SAASC,cAAcA,CAAA,EAAG;EAAAC,EAAA;EACxB;EACA,MAAM;IACJC,SAAS;IACTC,SAAS;IACTC,QAAQ;IACRC,SAAS;IACTC,gBAAgB;IAChBC,IAAI;IACJC,KAAK;IACLC,IAAI;IACJC;EACF,CAAC,GAAG5D,gBAAgB,CAAC,CAAC;;EAEtB;EACA,MAAM,CAAC6D,UAAU,EAAEC,aAAa,CAAC,GAAGjE,QAAQ,CAAoBiD,iBAAiB,CAACiB,aAAa,CAAC;EAChG,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGpE,QAAQ,CAAC,SAAS,CAAC;EACvD,MAAM,CAACqE,QAAQ,EAAEC,WAAW,CAAC,GAAGtE,QAAQ,CAAC,SAAS,CAAC;EACnD,MAAM,CAACuE,WAAW,EAAEC,cAAc,CAAC,GAAGxE,QAAQ,CAAC,CAAC,CAAC;EACjD,MAAM,CAACyE,QAAQ,EAAEC,WAAW,CAAC,GAAG1E,QAAQ,CAAC,CAAC,CAAC;EAC3C,MAAM,CAAC2E,MAAM,EAAEC,cAAc,CAAC,GAAG5E,QAAQ,CAAC,CAAC,CAAC;EAC5C,MAAM,CAAC6E,QAAQ,EAAEC,WAAW,CAAC,GAAG9E,QAAQ,CAAC,gBAAgB,CAAC;;EAE1D;EACA,MAAM+E,SAAS,GAAGhF,MAAM,CAAoB,IAAI,CAAC;EACjD,MAAMiF,YAAY,GAAGjF,MAAM,CAAkC,IAAI,CAAC;EAClE,MAAMkF,YAAY,GAAGlF,MAAM,CAAgB,IAAI,CAAC;EAChD,MAAMmF,YAAY,GAAGnF,MAAM,CAA2B,EAAE,CAAC;;EAEzD;EACAE,SAAS,CAAC,MAAM;IACd,IAAI8E,SAAS,CAACI,OAAO,EAAE;MACrBH,YAAY,CAACG,OAAO,GAAGJ,SAAS,CAACI,OAAO,CAACC,UAAU,CAAC,IAAI,CAAC;;MAEzD;MACA,MAAMC,YAAY,GAAGA,CAAA,KAAM;QACzB,IAAIN,SAAS,CAACI,OAAO,EAAE;UACrB,MAAMG,SAAS,GAAGP,SAAS,CAACI,OAAO,CAACI,aAAa;UACjD,IAAID,SAAS,EAAE;YACbP,SAAS,CAACI,OAAO,CAACK,KAAK,GAAGF,SAAS,CAACG,WAAW;YAC/CV,SAAS,CAACI,OAAO,CAACO,MAAM,GAAGJ,SAAS,CAACK,YAAY;UACnD;QACF;MACF,CAAC;MAEDN,YAAY,CAAC,CAAC;MACdO,MAAM,CAACC,gBAAgB,CAAC,QAAQ,EAAER,YAAY,CAAC;;MAE/C;MACA,IAAIrB,UAAU,KAAKf,iBAAiB,CAAC6C,SAAS,IAAIf,SAAS,CAACI,OAAO,EAAE;QACnED,YAAY,CAACC,OAAO,GAAG/E,aAAa,CAAC2F,eAAe,CAClD,GAAG,EACHhB,SAAS,CAACI,OAAO,CAACK,KAAK,EACvBT,SAAS,CAACI,OAAO,CAACO,MAAM,EACxB;UAAEvB,UAAU;UAAEE;QAAS,CACzB,CAAC;MACH;MAEA,OAAO,MAAM;QACXuB,MAAM,CAACI,mBAAmB,CAAC,QAAQ,EAAEX,YAAY,CAAC;MACpD,CAAC;IACH;EACF,CAAC,EAAE,CAACrB,UAAU,EAAEG,UAAU,EAAEE,QAAQ,CAAC,CAAC;;EAEtC;EACApE,SAAS,CAAC,MAAM;IACd,IAAIwD,QAAQ,CAAC0B,OAAO,EAAE;MACpB,MAAMc,KAAK,GAAGxC,QAAQ,CAAC0B,OAAO;MAE9B,MAAMe,iBAAiB,GAAGA,CAAA,KAAM;QAC9B1B,cAAc,CAACyB,KAAK,CAAC1B,WAAW,CAAC;QACjCG,WAAW,CAACuB,KAAK,CAACxB,QAAQ,CAAC;MAC7B,CAAC;MAEDwB,KAAK,CAACJ,gBAAgB,CAAC,YAAY,EAAEK,iBAAiB,CAAC;MACvDD,KAAK,CAACJ,gBAAgB,CAAC,gBAAgB,EAAEK,iBAAiB,CAAC;MAE3D,OAAO,MAAM;QACXD,KAAK,CAACD,mBAAmB,CAAC,YAAY,EAAEE,iBAAiB,CAAC;QAC1DD,KAAK,CAACD,mBAAmB,CAAC,gBAAgB,EAAEE,iBAAiB,CAAC;MAChE,CAAC;IACH;EACF,CAAC,EAAE,CAACzC,QAAQ,CAAC,CAAC;;EAEd;EACAxD,SAAS,CAAC,MAAM;IACd;IACA,IAAI,CAACsD,SAAS,CAAC4C,KAAK,IAAI,CAACnB,YAAY,CAACG,OAAO,IAAI,CAACJ,SAAS,CAACI,OAAO,EAAE;MACnE;IACF;IAEA,MAAMpC,MAAM,GAAGgC,SAAS,CAACI,OAAO;IAChC,MAAMiB,GAAG,GAAGpB,YAAY,CAACG,OAAO;IAEhC,MAAMkB,IAAI,GAAGA,CAAA,KAAM;MACjB,IAAI,CAACD,GAAG,IAAI,CAACrD,MAAM,EAAE;MAErB,MAAM;QAAEuD,WAAW;QAAEC,QAAQ;QAAE5B;MAAO,CAAC,GAAGpB,SAAS;MAEnD,QAAQS,UAAU;QAChB,KAAKf,iBAAiB,CAACiB,aAAa;UAClC9D,aAAa,CAACoG,gBAAgB,CAACJ,GAAG,EAAEE,WAAW,EAAEvD,MAAM,CAACyC,KAAK,EAAEzC,MAAM,CAAC2C,MAAM,EAAE;YAC5EvB,UAAU;YACVE;UACF,CAAC,CAAC;UACF;QAEF,KAAKpB,iBAAiB,CAACwD,QAAQ;UAC7BrG,aAAa,CAACsG,YAAY,CAACN,GAAG,EAAEG,QAAQ,EAAExD,MAAM,CAACyC,KAAK,EAAEzC,MAAM,CAAC2C,MAAM,EAAE;YACrEiB,KAAK,EAAExC,UAAU;YACjByC,MAAM,EAAE;UACV,CAAC,CAAC;UACF;QAEF,KAAK3D,iBAAiB,CAAC4D,QAAQ;UAC7BzG,aAAa,CAAC0G,oBAAoB,CAACV,GAAG,EAAEE,WAAW,EAAEvD,MAAM,CAACyC,KAAK,EAAEzC,MAAM,CAAC2C,MAAM,EAAE;YAChFvB,UAAU;YACVE,QAAQ;YACR0C,QAAQ,EAAEC,IAAI,CAACC,GAAG,CAAC,CAAC,GAAG;UACzB,CAAC,CAAC;UACF;QAEF,KAAKhE,iBAAiB,CAAC6C,SAAS;UAC9BM,GAAG,CAACc,SAAS,CAAC,CAAC,EAAE,CAAC,EAAEnE,MAAM,CAACyC,KAAK,EAAEzC,MAAM,CAAC2C,MAAM,CAAC;UAChD;UACAR,YAAY,CAACC,OAAO,GAAG/E,aAAa,CAAC+G,eAAe,CAClDjC,YAAY,CAACC,OAAO,EACpBpC,MAAM,CAACyC,KAAK,EACZzC,MAAM,CAAC2C,MAAM,EACbf,MACF,CAAC;UACD;UACAvE,aAAa,CAACgH,aAAa,CAAChB,GAAG,EAAElB,YAAY,CAACC,OAAO,EAAER,MAAM,CAAC;UAC9D;QAEF,KAAK1B,iBAAiB,CAACoE,YAAY;UACjCjH,aAAa,CAACkH,gBAAgB,CAAClB,GAAG,EAAEE,WAAW,EAAEvD,MAAM,CAACyC,KAAK,EAAEzC,MAAM,CAAC2C,MAAM,EAAE;YAC5EvB,UAAU;YACVE,QAAQ;YACRkD,QAAQ,EAAE,CAAC;YACXR,QAAQ,EAAEC,IAAI,CAACC,GAAG,CAAC,CAAC,GAAG;UACzB,CAAC,CAAC;UACF;QAEF,KAAKhE,iBAAiB,CAACuE,eAAe;UACpCpH,aAAa,CAACqH,kBAAkB,CAACrB,GAAG,EAAEE,WAAW,EAAEvD,MAAM,CAACyC,KAAK,EAAEzC,MAAM,CAAC2C,MAAM,EAAE;YAC9EvB,UAAU;YACVE,QAAQ;YACRqD,KAAK,EAAE;UACT,CAAC,CAAC;UACF;QAEF,KAAKzE,iBAAiB,CAAC0E,YAAY;UACjCvH,aAAa,CAACwH,eAAe,CAACxB,GAAG,EAAEE,WAAW,EAAEC,QAAQ,EAAExD,MAAM,CAACyC,KAAK,EAAEzC,MAAM,CAAC2C,MAAM,EAAE;YACrFvB,UAAU;YACVE,QAAQ;YACRwD,UAAU,EAAE,GAAG,GAAGlD,MAAM,GAAG;UAC7B,CAAC,CAAC;UACF;QAEF,KAAK1B,iBAAiB,CAAC6E,MAAM;UAC3B1H,aAAa,CAAC2H,UAAU,CAAC3B,GAAG,EAAEE,WAAW,EAAEvD,MAAM,CAACyC,KAAK,EAAEzC,MAAM,CAAC2C,MAAM,EAAE;YACtEvB,UAAU;YACVE,QAAQ;YACRqD,KAAK,EAAE,CAAC,GAAG/C,MAAM,GAAG;UACtB,CAAC,CAAC;UACF;QAEF,KAAK1B,iBAAiB,CAAC+E,QAAQ;UAC7B5H,aAAa,CAAC6H,WAAW,CAAC7B,GAAG,EAAEE,WAAW,EAAEC,QAAQ,EAAExD,MAAM,CAACyC,KAAK,EAAEzC,MAAM,CAAC2C,MAAM,EAAE;YACjFwC,SAAS,EAAE/D,UAAU;YACrBgE,QAAQ,EAAE9D;UACZ,CAAC,CAAC;UACF;QAEF,KAAKpB,iBAAiB,CAACmF,YAAY;UACjChI,aAAa,CAACiI,qBAAqB,CAACjC,GAAG,EAAEE,WAAW,EAAEC,QAAQ,EAAExD,MAAM,CAACyC,KAAK,EAAEzC,MAAM,CAAC2C,MAAM,EAAE;YAC3FvB,UAAU;YACVE,QAAQ;YACRiE,OAAO,EAAE,CAAC,GAAG3D;UACf,CAAC,CAAC;UACF;QAEF,KAAK1B,iBAAiB,CAACsF,YAAY;UACjCnI,aAAa,CAACoI,eAAe,CAACpC,GAAG,EAAEE,WAAW,EAAEC,QAAQ,EAAExD,MAAM,CAACyC,KAAK,EAAEzC,MAAM,CAAC2C,MAAM,EAAE;YACrFvB,UAAU;YACVE,QAAQ;YACRoE,aAAa,EAAE,CAAC,GAAG9D,MAAM,GAAG;UAC9B,CAAC,CAAC;UACF;QAEF,KAAK1B,iBAAiB,CAACyF,SAAS;UAC9BtI,aAAa,CAACuI,YAAY,CAACvC,GAAG,EAAEE,WAAW,EAAEC,QAAQ,EAAExD,MAAM,CAACyC,KAAK,EAAEzC,MAAM,CAAC2C,MAAM,EAAE;YAClFvB,UAAU;YACVE,QAAQ;YACRuE,cAAc,EAAE,SAAS;YACzBC,YAAY,EAAE;UAChB,CAAC,CAAC;UACF;QAEF,KAAK5F,iBAAiB,CAAC6F,cAAc;UACnC1I,aAAa,CAAC2I,iBAAiB,CAAC3C,GAAG,EAAEE,WAAW,EAAEC,QAAQ,EAAExD,MAAM,CAACyC,KAAK,EAAEzC,MAAM,CAAC2C,MAAM,EAAE;YACvFvB,UAAU;YACVE,QAAQ;YACRiE,OAAO,EAAE,CAAC,GAAG3D;UACf,CAAC,CAAC;UACF;QAEF,KAAK1B,iBAAiB,CAAC+F,aAAa;UAClC5I,aAAa,CAAC6I,gBAAgB,CAAC7C,GAAG,EAAEE,WAAW,EAAEC,QAAQ,EAAExD,MAAM,CAACyC,KAAK,EAAEzC,MAAM,CAAC2C,MAAM,EAAE;YACtFwD,IAAI,EAAE,IAAI;YACV/E,UAAU;YACVE,QAAQ;YACR8E,QAAQ,EAAE;UACZ,CAAC,CAAC;UACF;MACJ;MAEAlE,YAAY,CAACE,OAAO,GAAGiE,qBAAqB,CAAC/C,IAAI,CAAC;IACpD,CAAC;IAEDA,IAAI,CAAC,CAAC;;IAEN;IACA,OAAO,MAAM;MACX,IAAIpB,YAAY,CAACE,OAAO,EAAE;QACxBkE,oBAAoB,CAACpE,YAAY,CAACE,OAAO,CAAC;MAC5C;IACF,CAAC;EACH,CAAC,EAAE,CAAC5B,SAAS,EAAES,UAAU,EAAEG,UAAU,EAAEE,QAAQ,CAAC,CAAC;;EAEjD;EACA,MAAMiF,gBAAgB,GAAIC,CAAsC,IAAK;IACnE,MAAMC,KAAK,GAAGD,CAAC,CAACE,MAAM,CAACD,KAAK;IAC5B,IAAIA,KAAK,IAAIA,KAAK,CAACE,MAAM,GAAG,CAAC,EAAE;MAC7B,MAAMC,IAAI,GAAGH,KAAK,CAAC,CAAC,CAAC;;MAErB;MACA,IAAIG,IAAI,CAACxG,IAAI,CAACyG,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC,MAAM,CAAC,EAAE;QAC5CC,KAAK,CAAC,oCAAoC,CAAC;QAC3C;MACF;MAEAhF,WAAW,CAAC6E,IAAI,CAACxG,IAAI,CAAC;MACtBO,SAAS,CAACiG,IAAI,CAAC;IACjB;EACF,CAAC;;EAED;EACA,MAAMI,iBAAiB,GAAI3G,GAAW,IAAK;IACzCO,gBAAgB,CAACP,GAAG,CAAC;IACrB,MAAM4G,KAAK,GAAG9G,aAAa,CAAC+G,IAAI,CAACC,CAAC,IAAIA,CAAC,CAAC9G,GAAG,KAAKA,GAAG,CAAC;IACpD,IAAI4G,KAAK,EAAE;MACTlF,WAAW,CAACkF,KAAK,CAAC7G,IAAI,CAAC;IACzB;EACF,CAAC;;EAED;EACA,MAAMgH,mBAAmB,GAAIZ,CAAmC,IAAK;IACnE,IAAI,CAAC9F,QAAQ,CAAC0B,OAAO,IAAI,CAACV,QAAQ,EAAE;IAEpC,MAAM2F,WAAW,GAAGb,CAAC,CAACc,aAAa;IACnC,MAAMC,IAAI,GAAGF,WAAW,CAACG,qBAAqB,CAAC,CAAC;IAChD,MAAMC,OAAO,GAAGjB,CAAC,CAACkB,OAAO,GAAGH,IAAI,CAACI,IAAI;IACrC,MAAMC,UAAU,GAAGH,OAAO,GAAGF,IAAI,CAAC9E,KAAK;IAEvC,MAAMoF,OAAO,GAAGD,UAAU,GAAGlG,QAAQ;IACrChB,QAAQ,CAAC0B,OAAO,CAACZ,WAAW,GAAGqG,OAAO;EACxC,CAAC;;EAED;EACA,MAAMC,kBAAkB,GAAItB,CAAsC,IAAK;IACrE,MAAMuB,SAAS,GAAGC,UAAU,CAACxB,CAAC,CAACE,MAAM,CAACuB,KAAK,CAAC;IAC5CpG,cAAc,CAACkG,SAAS,CAAC;IACzB/G,SAAS,CAAC+G,SAAS,CAAC;EACtB,CAAC;;EAED;EACA,MAAMG,UAAU,GAAIC,IAAY,IAAK;IACnC,MAAMC,OAAO,GAAGC,IAAI,CAACC,KAAK,CAACH,IAAI,GAAG,EAAE,CAAC;IACrC,MAAMI,OAAO,GAAGF,IAAI,CAACC,KAAK,CAACH,IAAI,GAAG,EAAE,CAAC;IACrC,OAAO,GAAGC,OAAO,IAAIG,OAAO,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAGA,OAAO,EAAE;EAC1D,CAAC;EAED,oBACEhL,OAAA,CAACC,mBAAmB;IAAAgL,QAAA,gBAClBjL,OAAA,CAACI,KAAK;MAAA6K,QAAA,EAAC;IAAK;MAAA1G,QAAA,EAAA2G,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAO,CAAC,eAEpBpL,OAAA,CAACO,YAAY;MAAA0K,QAAA,gBACXjL,OAAA,CAACS,UAAU;QAAAwK,QAAA,gBACTjL,OAAA,CAACW,YAAY;UAAAsK,QAAA,gBACXjL,OAAA,CAACa,KAAK;YAAAoK,QAAA,EAAC;UAAQ;YAAA1G,QAAA,EAAA2G,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,eACvBpL,OAAA,CAACwB,cAAc;YAAAyJ,QAAA,gBACbjL,OAAA,CAACqB,SAAS;cACRgK,IAAI,EAAC,MAAM;cACXC,MAAM,EAAC,SAAS;cAChBC,QAAQ,EAAEvC;YAAiB;cAAAzE,QAAA,EAAA2G,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC5B,CAAC,8CAEJ;UAAA;YAAA7G,QAAA,EAAA2G,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAgB,CAAC,eACjBpL,OAAA;YAAMwL,KAAK,EAAE;cAAEC,UAAU,EAAE,MAAM;cAAEpF,KAAK,EAAE;YAAO,CAAE;YAAA4E,QAAA,EAAE1G;UAAQ;YAAAA,QAAA,EAAA2G,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC;QAAA;UAAA7G,QAAA,EAAA2G,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACzD,CAAC,eAEfpL,OAAA,CAACW,YAAY;UAAAsK,QAAA,gBACXjL,OAAA,CAACa,KAAK;YAAAoK,QAAA,EAAC;UAAM;YAAA1G,QAAA,EAAA2G,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,eACrBpL,OAAA,CAAC0B,MAAM;YAAC6J,QAAQ,EAAGtC,CAAC,IAAKQ,iBAAiB,CAACR,CAAC,CAACE,MAAM,CAACuB,KAAK,CAAE;YAAAO,QAAA,gBACzDjL,OAAA;cAAQ0K,KAAK,EAAC,EAAE;cAAAO,QAAA,EAAC;YAAS;cAAA1G,QAAA,EAAA2G,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,EAClCxI,aAAa,CAAC8I,GAAG,CAAC,CAAChC,KAAK,EAAEiC,KAAK,kBAC9B3L,OAAA;cAAoB0K,KAAK,EAAEhB,KAAK,CAAC5G,GAAI;cAAAmI,QAAA,EAClCvB,KAAK,CAAC7G;YAAI,GADA8I,KAAK;cAAApH,QAAA,EAAA2G,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAEV,CACT,CAAC;UAAA;YAAA7G,QAAA,EAAA2G,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACI,CAAC;QAAA;UAAA7G,QAAA,EAAA2G,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACG,CAAC;MAAA;QAAA7G,QAAA,EAAA2G,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACL,CAAC,eAEbpL,OAAA,CAACS,UAAU;QAAAwK,QAAA,gBACTjL,OAAA,CAACW,YAAY;UAAAsK,QAAA,gBACXjL,OAAA,CAACa,KAAK;YAAAoK,QAAA,EAAC;UAAW;YAAA1G,QAAA,EAAA2G,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,eAC1BpL,OAAA;YAAKwL,KAAK,EAAE;cAAEI,OAAO,EAAE,MAAM;cAAEC,GAAG,EAAE;YAAO,CAAE;YAAAZ,QAAA,gBAC3CjL,OAAA,CAACgB,MAAM;cAACG,QAAQ;cAAC2K,OAAO,EAAExI,IAAK;cAACyI,QAAQ,EAAE,CAAC9I,SAAS,CAAC4C,KAAM;cAAAoF,QAAA,EAAC;YAE5D;cAAA1G,QAAA,EAAA2G,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eACTpL,OAAA,CAACgB,MAAM;cAAC8K,OAAO,EAAEvI,KAAM;cAACwI,QAAQ,EAAE,CAAC7I,SAAU;cAAA+H,QAAA,EAAC;YAE9C;cAAA1G,QAAA,EAAA2G,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eACTpL,OAAA,CAACgB,MAAM;cAAC8K,OAAO,EAAEtI,IAAK;cAACuI,QAAQ,EAAE,CAAC9I,SAAS,CAAC4C,KAAM;cAAAoF,QAAA,EAAC;YAEnD;cAAA1G,QAAA,EAAA2G,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA;YAAA7G,QAAA,EAAA2G,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN,CAAC;QAAA;UAAA7G,QAAA,EAAA2G,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACM,CAAC,eAEfpL,OAAA,CAACW,YAAY;UAAAsK,QAAA,gBACXjL,OAAA,CAACa,KAAK;YAAAoK,QAAA,GAAC,oBAAG,EAACH,IAAI,CAACkB,KAAK,CAAC3H,MAAM,GAAG,GAAG,CAAC,EAAC,GAAC;UAAA;YAAAE,QAAA,EAAA2G,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,eAC7CpL,OAAA;YACEqL,IAAI,EAAC,OAAO;YACZY,GAAG,EAAC,GAAG;YACPC,GAAG,EAAC,GAAG;YACPC,IAAI,EAAC,MAAM;YACXzB,KAAK,EAAErG,MAAO;YACdkH,QAAQ,EAAEhB,kBAAmB;YAC7BiB,KAAK,EAAE;cAAEtG,KAAK,EAAE;YAAO;UAAE;YAAAX,QAAA,EAAA2G,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC1B,CAAC;QAAA;UAAA7G,QAAA,EAAA2G,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACU,CAAC;MAAA;QAAA7G,QAAA,EAAA2G,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACL,CAAC,eAEbpL,OAAA,CAACS,UAAU;QAAAwK,QAAA,eACTjL,OAAA,CAACW,YAAY;UAAAsK,QAAA,gBACXjL,OAAA,CAACa,KAAK;YAAAoK,QAAA,GAAC,gCAAK,EAACN,UAAU,CAAC1G,WAAW,CAAC,EAAC,KAAG,EAAC0G,UAAU,CAACxG,QAAQ,CAAC;UAAA;YAAAI,QAAA,EAAA2G,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eACtEpL,OAAA,CAACiC,WAAW;YAAC6J,OAAO,EAAEjC,mBAAoB;YAAAoB,QAAA,eACxCjL,OAAA,CAACmC,QAAQ;cAACC,MAAM,EAAE,GAAI6B,WAAW,GAAGE,QAAQ,GAAI,GAAG,IAAI,CAAC;YAAI;cAAAI,QAAA,EAAA2G,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE;UAAC;YAAA7G,QAAA,EAAA2G,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACpD,CAAC;QAAA;UAAA7G,QAAA,EAAA2G,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACF;MAAC;QAAA7G,QAAA,EAAA2G,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACL,CAAC,eAEbpL,OAAA,CAACS,UAAU;QAAAwK,QAAA,gBACTjL,OAAA,CAACW,YAAY;UAAAsK,QAAA,gBACXjL,OAAA,CAACa,KAAK;YAAAoK,QAAA,EAAC;UAAW;YAAA1G,QAAA,EAAA2G,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,eAC1BpL,OAAA,CAAC0B,MAAM;YACLgJ,KAAK,EAAEhH,UAAW;YAClB6H,QAAQ,EAAGtC,CAAC,IAAKtF,aAAa,CAACsF,CAAC,CAACE,MAAM,CAACuB,KAA0B,CAAE;YAAAO,QAAA,gBAEpEjL,OAAA;cAAQ0K,KAAK,EAAE/H,iBAAiB,CAACiB,aAAc;cAAAqH,QAAA,EAAC;YAAQ;cAAA1G,QAAA,EAAA2G,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eACjEpL,OAAA;cAAQ0K,KAAK,EAAE/H,iBAAiB,CAACwD,QAAS;cAAA8E,QAAA,EAAC;YAAE;cAAA1G,QAAA,EAAA2G,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eACtDpL,OAAA;cAAQ0K,KAAK,EAAE/H,iBAAiB,CAAC4D,QAAS;cAAA0E,QAAA,EAAC;YAAQ;cAAA1G,QAAA,EAAA2G,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eAC5DpL,OAAA;cAAQ0K,KAAK,EAAE/H,iBAAiB,CAAC6C,SAAU;cAAAyF,QAAA,EAAC;YAAU;cAAA1G,QAAA,EAAA2G,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eAC/DpL,OAAA;cAAQ0K,KAAK,EAAE/H,iBAAiB,CAACoE,YAAa;cAAAkE,QAAA,EAAC;YAAQ;cAAA1G,QAAA,EAAA2G,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eAChEpL,OAAA;cAAQ0K,KAAK,EAAE/H,iBAAiB,CAACuE,eAAgB;cAAA+D,QAAA,EAAC;YAAc;cAAA1G,QAAA,EAAA2G,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eACzEpL,OAAA;cAAQ0K,KAAK,EAAE/H,iBAAiB,CAAC0E,YAAa;cAAA4D,QAAA,EAAC;YAAU;cAAA1G,QAAA,EAAA2G,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eAClEpL,OAAA;cAAQ0K,KAAK,EAAE/H,iBAAiB,CAAC6E,MAAO;cAAAyD,QAAA,EAAC;YAAI;cAAA1G,QAAA,EAAA2G,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eACtDpL,OAAA;cAAQ0K,KAAK,EAAE/H,iBAAiB,CAAC+E,QAAS;cAAAuD,QAAA,EAAC;YAAM;cAAA1G,QAAA,EAAA2G,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eAC1DpL,OAAA;cAAQ0K,KAAK,EAAE/H,iBAAiB,CAACmF,YAAa;cAAAmD,QAAA,EAAC;YAAG;cAAA1G,QAAA,EAAA2G,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eAC3DpL,OAAA;cAAQ0K,KAAK,EAAE/H,iBAAiB,CAACsF,YAAa;cAAAgD,QAAA,EAAC;YAAG;cAAA1G,QAAA,EAAA2G,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eAC3DpL,OAAA;cAAQ0K,KAAK,EAAE/H,iBAAiB,CAACyF,SAAU;cAAA6C,QAAA,EAAC;YAAM;cAAA1G,QAAA,EAAA2G,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eAC3DpL,OAAA;cAAQ0K,KAAK,EAAE/H,iBAAiB,CAAC6F,cAAe;cAAAyC,QAAA,EAAC;YAAM;cAAA1G,QAAA,EAAA2G,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eAChEpL,OAAA;cAAQ0K,KAAK,EAAE/H,iBAAiB,CAAC+F,aAAc;cAAAuC,QAAA,EAAC;YAAU;cAAA1G,QAAA,EAAA2G,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA;YAAA7G,QAAA,EAAA2G,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC7D,CAAC;QAAA;UAAA7G,QAAA,EAAA2G,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACG,CAAC,eAEfpL,OAAA,CAACW,YAAY;UAAAsK,QAAA,gBACXjL,OAAA,CAACa,KAAK;YAAAoK,QAAA,EAAC;UAAO;YAAA1G,QAAA,EAAA2G,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,eACtBpL,OAAA,CAAC+B,eAAe;YAAAkJ,QAAA,gBACdjL,OAAA,CAAC6B,UAAU;cACTwJ,IAAI,EAAC,OAAO;cACZX,KAAK,EAAE7G,UAAW;cAClB0H,QAAQ,EAAGtC,CAAC,IAAKnF,aAAa,CAACmF,CAAC,CAACE,MAAM,CAACuB,KAAK;YAAE;cAAAnG,QAAA,EAAA2G,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAChD,CAAC,eACFpL,OAAA;cAAMwL,KAAK,EAAE;gBAAEnF,KAAK,EAAE;cAAO,CAAE;cAAA4E,QAAA,EAAC;YAAE;cAAA1G,QAAA,EAAA2G,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,eACzCpL,OAAA,CAAC6B,UAAU;cACTwJ,IAAI,EAAC,OAAO;cACZX,KAAK,EAAE3G,QAAS;cAChBwH,QAAQ,EAAGtC,CAAC,IAAKjF,WAAW,CAACiF,CAAC,CAACE,MAAM,CAACuB,KAAK;YAAE;cAAAnG,QAAA,EAAA2G,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC9C,CAAC;UAAA;YAAA7G,QAAA,EAAA2G,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACa,CAAC;QAAA;UAAA7G,QAAA,EAAA2G,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC;MAAA;QAAA7G,QAAA,EAAA2G,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACL,CAAC;IAAA;MAAA7G,QAAA,EAAA2G,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACD,CAAC,eAEfpL,OAAA,CAACsC,eAAe;MAAA2I,QAAA,eACdjL,OAAA,CAACwC,MAAM;QAAC4J,GAAG,EAAE3H;MAAU;QAAAF,QAAA,EAAA2G,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE;IAAC;MAAA7G,QAAA,EAAA2G,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACX,CAAC;EAAA;IAAA7G,QAAA,EAAA2G,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACC,CAAC;AAE1B;AAACpI,EAAA,CAnZQD,cAAc;EAAA,QAYjBlD,gBAAgB;AAAA;AAAAwM,IAAA,GAZbtJ,cAAc;AAqZvB,eAAeA,cAAc;AAAC,IAAA5C,EAAA,EAAAG,GAAA,EAAAE,GAAA,EAAAE,GAAA,EAAAE,GAAA,EAAAG,GAAA,EAAAK,GAAA,EAAAG,GAAA,EAAAE,GAAA,EAAAG,IAAA,EAAAE,IAAA,EAAAE,IAAA,EAAAE,IAAA,EAAAG,IAAA,EAAAE,IAAA,EAAAG,IAAA,EAAA2J,IAAA;AAAAC,YAAA,CAAAnM,EAAA;AAAAmM,YAAA,CAAAhM,GAAA;AAAAgM,YAAA,CAAA9L,GAAA;AAAA8L,YAAA,CAAA5L,GAAA;AAAA4L,YAAA,CAAA1L,GAAA;AAAA0L,YAAA,CAAAvL,GAAA;AAAAuL,YAAA,CAAAlL,GAAA;AAAAkL,YAAA,CAAA/K,GAAA;AAAA+K,YAAA,CAAA7K,GAAA;AAAA6K,YAAA,CAAA1K,IAAA;AAAA0K,YAAA,CAAAxK,IAAA;AAAAwK,YAAA,CAAAtK,IAAA;AAAAsK,YAAA,CAAApK,IAAA;AAAAoK,YAAA,CAAAjK,IAAA;AAAAiK,YAAA,CAAA/J,IAAA;AAAA+J,YAAA,CAAA5J,IAAA;AAAA4J,YAAA,CAAAD,IAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}